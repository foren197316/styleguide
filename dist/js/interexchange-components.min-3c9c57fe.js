(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
"use strict";var actions=require("./actions");String.prototype.capitaliseWord=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.camelCaseToUnderscore=function(){return this.replace(/([A-Z])/g,"_$1").toLowerCase()},Array.prototype.flatten=function(){return this.reduce(function(t,e){return t.concat(e)},[])},Array.prototype.diff=function(t){return this.filter(function(e){return t.indexOf(e)<0})},Array.prototype.findById=function(t,e){var r=e||"id";if(t instanceof Array)return this.filter(function(e){return t.indexOf(e[r])>=0});for(var n=0;n<this.length;n++)if(this[n][r]===t)return this[n];return null},Array.prototype.intersects=function(t){if(0===t.length||0===this.length)return!1;for(var e=0;e<this.length;e++)if(t.indexOf(this[e])>=0)return!0;return!1},Array.prototype.intersection=function(t){return this.filter(function(e){return t.indexOf(e)>=0})},Array.prototype.mapAttribute=function(t){try{return this.map(function(e){return e[t]})}catch(e){console.log(e.stack)}},Array.prototype.notEmpty=function(){return this.filter(function(t){return void 0!==t&&null!==t})},String.prototype.pluralize=function(t){return 1===t?this:this+"s"},Array.prototype.uniq=function(){return this.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])};var traverse=function(t,e){var r=t;if("string"==typeof e)return r[e];for(var n=0;n<e.length;n++){if(!r)return null;r=r[e[n]]}return r},dateGreaterThan=function(t,e){return t.reduce(function(t,r){return t||Date.compare(r,e)>=0},!1)},dateLessThan=function(t,e){return t.reduce(function(t,r){return t||Date.compare(r,e)<=0},!1)},UrlStore=Reflux.createStore({urls:null,init:function(){this.listener=this.listenTo(actions.setUrls,this.onSetUrls)},onSetUrls:function(t){this.listener.stop(),this.urls=t,this.trigger(this.urls)}});Reflux.StoreMethods.onAjaxLoad=function(){var t=arguments,e=null;t[0]instanceof Array&&(e={ids:t[0].notEmpty().sort().uniq()});var r=function(r){$.ajax({url:r[this.resourceName],type:"GET",data:e,success:function(r){null!==e&&[].shift.call(t),[].unshift.call(t,r),this.onLoadSuccess.apply(this,t)}.bind(this),error:this.onLoadError.bind(this)})}.bind(this);null!=UrlStore.urls?r(UrlStore.urls):this.urlListener=this.listenTo(actions.setUrls,function(t){this.urlListener.stop(),r(t)}.bind(this))},Reflux.StoreMethods.onAjaxLoadSingleton=function(){this.onSetSingleton();var t=arguments;this.onAjaxLoad.apply(this,t)},Reflux.StoreMethods.onLoadSuccess=function(t){var e=arguments;if(this.data=t[this.resourceName.camelCaseToUnderscore()],this.data instanceof Array||(this.data=[this.data].notEmpty()),this.permission=!0,"function"==typeof this.initPostAjaxLoad?([].shift.call(e),[].unshift.call(e,this.data),this.initPostAjaxLoad.apply(this,e)):this.trigger(this.data),e.length>1)for(var r=1;r<e.length;r++)e[r](this.data)},Reflux.StoreMethods.onLoadError=function(){this.data=[],this.permission=!1,this.trigger(this.data)},Reflux.StoreMethods.genericIdFilter=function(t,e,r){this.filterIds=this.filterIds||{},this.filterIds[t]=void 0===e||null===e||0===e.length?null:this.data.reduce(function(t,e){return r(e)&&t.push(e.id),t},[]),this.emitFilteredData()},Reflux.StoreMethods.onSetData=function(t){this.data=t,this.trigger(this.data)},Reflux.StoreMethods.onForceTrigger=function(){this.trigger(this.data)},Reflux.StoreMethods.onSetSingleton=function(t){this.singleton=!0,this.resourceName=t||this.resourceName.replace(/s$/,"")},Reflux.StoreMethods.onRemoveByIds=function(t,e){"undefined"==typeof e&&(e=!0);var r=[].concat(t),n=[];this.data=this.data.filter(function(t){return r.indexOf(t.id)<0?!0:(n.push(t),!1)}),"function"==typeof this.cleanup&&this.cleanup(n),e&&this.trigger(this.data)},Reflux.StoreMethods.onResetSearch=function(t){this.filterIds=this.filterIds||{},this.filterIds[t]=null,this["lastSearchTerm-"+t]=null,this.emitFilteredData()},Reflux.StoreMethods.onSearch=function(t,e,r){this.filterIds=this.filterIds||{};var n=null,i=[].concat(r),s=e.toLowerCase().split(/\s+/),o="lastSearchTerm-"+t,a=this[o];a&&0===e.indexOf(a)?n=this.filterIds[t]:this.filterIds[t]=null;var u=function(t,e){return i.reduce(function(r,n){return r||(traverse(t,n)||"").toLowerCase().indexOf(e)>=0},!1)},l=this.data.reduce(function(t,e){if(!n||n.indexOf(e.id)>=0){var r=s.reduce(function(t,r){return t&&u(e,r)},!0);r&&t.push(e.id)}return t},[]);this.filterIds[t]=l,this[o]=e,this.emitFilteredData()},Reflux.StoreMethods.onDateFilter=function(t,e,r,n,i,s){var o=t+"-"+e;this.filterIds[o]=null===r&&null===n&&null===i&&null===s?null:this.data.reduce(function(o,a){var u=a[t],l=a[e];return null!==r&&!dateGreaterThan(u,r)||null!==n&&!dateLessThan(l,n)||null!==i&&!dateGreaterThan(u,i)||null!==s&&!dateLessThan(l,s)||o.push(a.id),o},[]),this.emitFilteredData()},Reflux.StoreMethods.onFilterByIds=function(t){this.trigger(t&&0!==t.length?this.data.filter(function(e){return t.indexOf(e.id.toString())>=0}):this.data)},Reflux.StoreMethods.emitFilteredData=function(){var t,e=null;for(var r in this.filterIds)this.filterIds.hasOwnProperty(r)&&null!==this.filterIds[r]&&(e=null===e?this.filterIds[r]:e.intersection(this.filterIds[r]));t=null===e?this.data:this.data.filter(function(t){return e.indexOf(t.id)>=0}),this.trigger(t)},Reflux.StoreMethods.findById=function(t,e){try{return this.data.findById(t,e)}catch(r){console.log(r.stack)}},Reflux.StoreMethods.map=function(t){return this.data.map(t)},Reflux.StoreMethods.mapAttribute=function(t){return this.data.mapAttribute(t)},global.AwaitingOrdersParticipantGroupPanels=require("./components/AwaitingOrdersParticipantGroupPanels"),global.InMatchingParticipantGroupsIndex=require("./components/InMatchingParticipantGroupsIndex"),global.ReservedParticipantGroupPanels=require("./components/ReservedParticipantGroupPanels"),global.OnReviewParticipantGroupPanels=require("./components/OnReviewParticipantGroupPanels"),global.OfferedParticipantGroupsIndex=require("./components/OfferedParticipantGroupsIndex"),global.JobOfferGroupsIndex=require("./components/JobOfferGroupsIndex"),global.JobOfferParticipantAgreementsIndex=require("./components/JobOfferParticipantAgreementsIndex");
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./actions":2,"./components/AwaitingOrdersParticipantGroupPanels":4,"./components/InMatchingParticipantGroupsIndex":11,"./components/JobOfferGroupsIndex":14,"./components/JobOfferParticipantAgreementsIndex":17,"./components/OfferedParticipantGroupsIndex":22,"./components/OnReviewParticipantGroupPanels":23,"./components/ReservedParticipantGroupPanels":31}],2:[function(require,module,exports){
"use strict";var genericStoreActions=["setData","ajaxLoad","filterByIds","forceTrigger","removeByIds","setSingleton","ajaxLoadSingleton"],filterableStoreActions=["search","resetSearch","dateFilter"];module.exports={OfferedParticipantGroupActions:Reflux.createActions(genericStoreActions.concat(filterableStoreActions).concat(["reject"])),InMatchingParticipantGroupActions:Reflux.createActions(genericStoreActions.concat(filterableStoreActions).concat(["offer","toggleInternationalDriversLicense","togglePreviousParticipation"])),JobOfferGroupActions:Reflux.createActions(genericStoreActions.concat(filterableStoreActions).concat(["create","destroy","toggleAllSigned"])),ParticipantGroupNameActions:Reflux.createActions(genericStoreActions.concat(["setNames"])),CountryActions:Reflux.createActions(genericStoreActions.concat(["setCountries"])),StaffActions:Reflux.createActions(genericStoreActions.concat(["loadFromEmployer"])),ProgramActions:Reflux.createActions(genericStoreActions.concat(["loadFromEmployer"])),EmployerActions:Reflux.createActions(genericStoreActions.concat(["updateOnReviewCount"])),JobOfferParticipantAgreementActions:Reflux.createActions(genericStoreActions.concat(filterableStoreActions)),JobOfferSignedActions:Reflux.createActions(genericStoreActions),EnglishLevelActions:Reflux.createActions(genericStoreActions),AgeAtArrivalActions:Reflux.createActions(genericStoreActions),GenderActions:Reflux.createActions(genericStoreActions),PositionActions:Reflux.createActions(genericStoreActions),loadFromJobOfferGroups:Reflux.createAction("loadFromJobOfferGroups"),loadFromOfferedParticipantGroups:Reflux.createAction("loadFromOfferedParticipantGroups"),loadFromJobOfferParticipantAgreements:Reflux.createAction("loadFromJobOfferParticipantAgreements"),loadFromInMatchingParticipantGroups:Reflux.createAction("loadFromInMatchingParticipantGroups"),setUrls:Reflux.createAction("setUrls")};
},{}],3:[function(require,module,exports){
"use strict";var AlertClose=React.createClass({displayName:"AlertClose",render:function(){return React.DOM.button({type:"button",className:"close","data-dismiss":"alert"},React.DOM.span({"aria-hidden":"true"},"×"),React.DOM.span({className:"sr-only"},"Close"))}}),Alert=React.createClass({displayName:"Alert",propTypes:{type:React.PropTypes.oneOf(["warning","success","danger","info","primary","default"]).isRequired,message:React.PropTypes.string.isRequired,instructions:React.PropTypes.string,actionTitle:React.PropTypes.string,actionUrl:React.PropTypes.string,closeable:React.PropTypes.bool},getDefaultProps:function(){return{closeable:!0}},render:function(){var e=this.props.actionTitle&&this.props.actionUrl?React.DOM.span(null," ",React.DOM.a({className:"alert-link",href:this.props.actionUrl},this.props.actionTitle),"."):null;return React.DOM.div({className:"alert alert-"+this.props.type},this.props.closeable?AlertClose(null):null,React.DOM.strong(null,this.props.message),React.DOM.br(null),React.DOM.span(null,this.props.instructions),e)}});module.exports=Alert;
},{}],4:[function(require,module,exports){
"use strict";var ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),Spinner=require("./Spinner"),AwaitingOrdersParticipantGroupPanel=React.createClass({displayName:"AwaitingOrdersParticipantGroupPanel",propTypes:{data:React.PropTypes.object.isRequired},getInitialState:function(){return{sending:!1,puttingInMatching:!1,puttingOnReserve:!1}},handlePutInMatching:function(){this.setState({puttingInMatching:!0})},handlePutOnReserve:function(){this.setState({puttingOnReserve:!0})},handleCancel:function(){this.setState({puttingOnReserve:!1,puttingInMatching:!1})},handleConfirm:function(){this.setState({sending:!0});var t=this.getDOMNode(),n=null,a=null;this.state.puttingInMatching?(n="/in_matching_participant_groups.json",a={in_matching_participant_group:{awaiting_orders_participant_group_id:this.props.data.id}}):this.state.puttingOnReserve&&(n="/reserved_participant_groups.json",a={reserved_participant_group:{awaiting_orders_participant_group_id:this.props.data.id}}),$.ajax({url:n,type:"POST",data:a,success:function(){React.unmountComponentAtNode(t),$(t).remove()},error:function(){window.location=window.location}})},render:function(){var t,n=this.props.data.name+(null!=this.props.data.program?" - "+this.props.data.program.name:""),a=this.props.data.participants.map(function(t){return ParticipantGroupParticipant({key:t.id,participant:t})});return t=this.state.puttingInMatching||this.state.puttingOnReserve?React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-success",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")):React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-primary",onClick:this.handlePutInMatching},"Put In Matching"),React.DOM.button({className:"btn btn-warning",onClick:this.handlePutOnReserve},"Put On Reserve")),React.DOM.div({className:"panel panel-default participant-group-panel"},React.DOM.div({className:"list-group"},a),ParticipantGroupPanelFooter({name:n},t))}}),AwaitingOrdersParticipantGroupPanels=React.createClass({displayName:"AwaitingOrdersParticipantGroupPanels",propTypes:{source:React.PropTypes.string.isRequired},getInitialState:function(){return{groups:null}},componentDidMount:function(){$.get(this.props.source,function(t){this.isMounted()&&this.setState({groups:t.awaiting_orders_participant_groups})}.bind(this))},render:function(){return this.isMounted()?React.DOM.div({id:"participant-group-panels"},this.state.groups.map(function(t){return AwaitingOrdersParticipantGroupPanel({key:t.id,data:t})})):Spinner(null)}});module.exports=AwaitingOrdersParticipantGroupPanels;
},{"./ParticipantGroupPanelFooter":24,"./ParticipantGroupParticipant":25,"./Spinner":33}],5:[function(require,module,exports){
"use strict";var BooleanFilter=React.createClass({displayName:"BooleanFilter",propTypes:{title:React.PropTypes.string.isRequired,label:React.PropTypes.string.isRequired,action:React.PropTypes.func.isRequired},onChange:function(){this.props.action(this.refs.checkbox.getDOMNode().checked)},render:function(){return React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},this.props.title),React.DOM.div({className:"list-group list-group-scrollable"},React.DOM.label({className:"list-group-item"},React.DOM.input({ref:"checkbox",type:"checkbox",name:this.props.title.toLowerCase(),onChange:this.onChange}),React.DOM.span({className:"title"},this.props.label))))}});module.exports=BooleanFilter;
},{}],6:[function(require,module,exports){
"use strict";var CheckBoxFilter=React.createClass({displayName:"CheckBoxFilter",propTypes:{title:React.PropTypes.string.isRequired,store:React.PropTypes.object.isRequired,actions:React.PropTypes.object.isRequired},getInitialState:function(){return{isLoaded:!!this.props.store.data}},componentDidMount:function(){this.state.isLoaded||(this.stopListener=this.props.store.listen(function(){this.stopListener(),this.setState({isLoaded:!0})}.bind(this)))},onChange:function(){var t=$.map($(this.getDOMNode()).find('input[type="checkbox"]:checked'),function(t){return t.getAttribute("value")});this.props.actions.filterByIds(t)},render:function(){return this.props.store.permission&&this.props.store.data.length>0&&this.state.isLoaded?React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},this.props.title),React.DOM.div({className:"list-group list-group-scrollable"},this.props.store.data.map(function(t){return React.DOM.label({key:this.props.title+"_checkbox_"+t.id,className:"list-group-item"},React.DOM.input({type:"checkbox",name:this.props.title.toLowerCase()+"["+t.id+"]",value:t.id,onChange:this.onChange}),React.DOM.span({className:"title"},t.name))}.bind(this)))):null}});module.exports=CheckBoxFilter;
},{}],7:[function(require,module,exports){
"use strict";var DateRangeFilter=React.createClass({displayName:"DateRangeFilter",propTypes:{searchFrom:React.PropTypes.string.isRequired,searchTo:React.PropTypes.string.isRequired,actions:React.PropTypes.object.isRequired},componentDidMount:function(){$(this.getDOMNode()).find(".datepicker").datepicker({autoclose:!0,clearBtn:!0}).on("hide",this.handleChange).on("clear",this.handleChange)},handleChange:function(){var e=Date.parse(this.refs.start_from.getDOMNode().value),t=Date.parse(this.refs.start_to.getDOMNode().value),a=Date.parse(this.refs.finish_from.getDOMNode().value),s=Date.parse(this.refs.finish_to.getDOMNode().value);this.props.actions.dateFilter(this.props.searchFrom,this.props.searchTo,e,t,a,s)},render:function(){return React.DOM.div({className:"panel panel-default"},React.DOM.div({className:"panel-heading"},"Start"),React.DOM.div({className:"list-group list-group-scrollable"},React.DOM.label({className:"list-group-item"},React.DOM.span({className:"title"},"From"),React.DOM.input({type:"text",ref:"start_from",className:"datepicker start from form-control"})),React.DOM.label({className:"list-group-item"},React.DOM.span({className:"title"},"To"),React.DOM.input({type:"text",ref:"start_to",className:"datepicker start to form-control"}))),React.DOM.div({className:"panel-heading"},"Finish"),React.DOM.div({className:"list-group list-group-scrollable"},React.DOM.label({className:"list-group-item"},React.DOM.span({className:"title"},"From"),React.DOM.input({type:"text",ref:"finish_from",className:"datepicker finish from form-control"})),React.DOM.label({className:"list-group-item"},React.DOM.span({className:"title"},"To"),React.DOM.input({type:"text",ref:"finish_to",className:"datepicker finish to form-control"}))))}});module.exports=DateRangeFilter;
},{}],8:[function(require,module,exports){
"use strict";var StaffStore=require("../stores/StaffStore"),LinkToIf=require("./LinkToIf"),EmployerHeader=React.createClass({displayName:"EmployerHeader",propTypes:{employer:React.PropTypes.object.isRequired},render:function(){var e=this.props.employer,r=StaffStore.findById(e.staff_id)||{};return React.DOM.div({className:"panel-heading"},React.DOM.h1({className:"panel-title"},React.DOM.span({className:"pull-right text-muted"},r.name),LinkToIf({name:e.name,href:e.href})))}});module.exports=EmployerHeader;
},{"../stores/StaffStore":51,"./LinkToIf":19}],9:[function(require,module,exports){
"use strict";var HiddenIdInput=React.createClass({displayName:"HiddenIdInput",propTypes:{id:React.PropTypes.number.isRequired},render:function(){return React.DOM.input({type:"hidden",name:"ids[]",value:this.props.id})}}),ExportButton=React.createClass({displayName:"ExportButton",propTypes:{ids:React.PropTypes.array.isRequired,url:React.PropTypes.string.isRequired},render:function(){return React.DOM.form({action:this.props.url,method:"GET"},React.DOM.button({className:"btn btn-block btn-default",type:"submit",style:{marginBottom:"15px"}},React.DOM.i({className:"fa fa-download"})," Export to CSV"),this.props.ids.map(function(t){return HiddenIdInput({id:t,key:"hidden_input_"+t})}))}});module.exports=ExportButton;
},{}],10:[function(require,module,exports){
"use strict";var dateFormat=require("../globals").dateFormat,actions=require("../actions"),Alert=require("./Alert"),ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),InMatchingParticipantGroupPanel=React.createClass({displayName:"InMatchingParticipantGroupPanel",propTypes:{employer:React.PropTypes.object.isRequired,enrollment:React.PropTypes.object.isRequired,inMatchingParticipantGroup:React.PropTypes.object.isRequired},getInitialState:function(){return{sending:!1,puttingOnReview:!1,onReviewExpiresOn:Date.today().add(3).days().toString(dateFormat)}},canPutOnReview:function(){return this.props.enrollment.on_review_count<this.props.enrollment.on_review_maximum&&this.props.inMatchingParticipantGroup.participants.length<=this.props.enrollment.on_review_maximum-this.props.enrollment.on_review_count},handlePutOnReview:function(){this.setState({puttingOnReview:!0}),Intercom("trackEvent","clicked-employer-participants-review",{employer_id:this.props.employer.id,employer_name:this.props.employer.name,participant_names:this.participantNames()})},handleCancel:function(){this.setState({puttingOnReview:!1}),Intercom("trackEvent","canceled-employer-participants-review",{employer_id:this.props.employer.id,employer_name:this.props.employer.name,participant_names:this.participantNames()})},handleConfirm:function(){this.setState({sending:!0}),actions.InMatchingParticipantGroupActions.offer(this.props.inMatchingParticipantGroup,this.props.employer,this.props.enrollment,this.state.onReviewExpiresOn,function(t){this.setState({status:t.responseJSON.status}),Intercom("trackEvent","confirmed-employer-participants-review",{employer_id:this.props.employer.id,employer_name:this.props.employer.name,participant_names:this.participantNames()})}.bind(this))},participantNames:function(){return this.props.inMatchingParticipantGroup.participants.mapAttribute("name").join(", ")},render:function(){var t,e,i=this.props.inMatchingParticipantGroup.name,a=this.props.inMatchingParticipantGroup.participants.length>1?"participants":"participant";if(this.state.status){var n=this.state.status;return Alert({type:n.type,message:n.message,instructions:n.instructions,actionTitle:n.action.title,actionUrl:n.action.url})}return this.state.puttingOnReview?(t=React.DOM.div({className:"btn-group pull-right"},React.DOM.button({className:"btn btn-success",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")),e=React.DOM.div(null,React.DOM.p({className:"panel-text"},"You will have until ",React.DOM.strong(null,this.state.onReviewExpiresOn)," to offer a position or decline the ",a,"."),React.DOM.p({className:"panel-text"},"If you take no action by ",React.DOM.strong(null,this.state.onReviewExpiresOn),", the ",a," will automatically be removed from your On Review list."))):t=this.canPutOnReview()?React.DOM.button({className:"btn btn-success pull-right",onClick:this.handlePutOnReview},"Put on Review"):React.DOM.span({className:"label label-warning"},"On Review limit reached"),React.DOM.div({className:"panel panel-default participant-group-panel","data-participant-names":this.participantNames()},React.DOM.div({className:"list-group"},this.props.inMatchingParticipantGroup.participants.map(function(t){return ParticipantGroupParticipant({key:t.id,participant:t})})),ParticipantGroupPanelFooter({name:i},t,e))}});module.exports=InMatchingParticipantGroupPanel;
},{"../actions":2,"../globals":36,"./Alert":3,"./ParticipantGroupPanelFooter":24,"./ParticipantGroupParticipant":25}],11:[function(require,module,exports){
"use strict";var actions=require("../actions"),RenderLoadedMixin=require("../mixins").RenderLoadedMixin,Alert=require("./Alert"),InMatchingParticipantGroupPanel=require("./InMatchingParticipantGroupPanel"),SearchFilter=require("./SearchFilter"),BooleanFilter=require("./BooleanFilter"),DateRangeFilter=require("./DateRangeFilter"),CheckBoxFilter=require("./CheckBoxFilter"),InMatchingParticipantGroupStore=require("../stores/InMatchingParticipantGroupStore"),EmployerStore=require("../stores/EmployerStore"),ProgramStore=require("../stores/ProgramStore"),AgeAtArrivalStore=require("../stores/AgeAtArrivalStore"),ParticipantGroupNameStore=require("../stores/ParticipantGroupNameStore"),GenderStore=require("../stores/GenderStore"),EnglishLevelStore=require("../stores/EnglishLevelStore"),PositionStore=require("../stores/PositionStore"),CountryStore=require("../stores/CountryStore"),InMatchingParticipantGroupsIndex=React.createClass({displayName:"InMatchingParticipantGroupsIndex",mixins:[Reflux.connect(InMatchingParticipantGroupStore,"inMatchingParticipantGroups"),Reflux.connect(EmployerStore,"employer"),Reflux.connect(ProgramStore,"programs"),RenderLoadedMixin("inMatchingParticipantGroups","employer","programs")],statics:{noResultsMessage:"There are currently no participants available who match your criteria. Check back soon!"},componentDidMount:function(){this.intercomListener=this.listenTo(EmployerStore,this.intercom),actions.setUrls(this.props.urls),actions.InMatchingParticipantGroupActions.ajaxLoad(actions.loadFromInMatchingParticipantGroups),actions.EmployerActions.ajaxLoadSingleton(),actions.PositionActions.ajaxLoad(),actions.ProgramActions.ajaxLoad()},intercom:function(t){this.intercomListener.stop(),Intercom("trackEvent","visited-employer-participants-search",{employer_id:t[0].id,employer_name:t[0].name})},renderLoaded:function(){var t=this.state.employer[0],e=this.state.inMatchingParticipantGroups.map(function(t){return t.participants[0].program_id}).sort().uniq();return React.DOM.div({className:"row"},React.DOM.div({className:"col-md-3"},SearchFilter({title:"Search",searchOn:"participant_names",actions:actions.InMatchingParticipantGroupActions}),CheckBoxFilter({title:"Age at Arrival",store:AgeAtArrivalStore,actions:actions.AgeAtArrivalActions}),CheckBoxFilter({title:"Group",store:ParticipantGroupNameStore,actions:actions.ParticipantGroupNameActions}),CheckBoxFilter({title:"Gender",store:GenderStore,actions:actions.GenderActions}),CheckBoxFilter({title:"English Level",store:EnglishLevelStore,actions:actions.EnglishLevelActions}),DateRangeFilter({searchFrom:"participant_start_dates",searchTo:"participant_finish_dates",actions:actions.InMatchingParticipantGroupActions}),CheckBoxFilter({title:"Positions",store:PositionStore,actions:actions.PositionActions}),CheckBoxFilter({title:"Country",store:CountryStore,actions:actions.CountryActions}),BooleanFilter({title:"Previous Participation",label:"Returning Participant",action:actions.InMatchingParticipantGroupActions.togglePreviousParticipation}),BooleanFilter({title:"Drivers License",label:"International Drivers License",action:actions.InMatchingParticipantGroupActions.toggleInternationalDriversLicense})),React.DOM.div({className:"col-md-9"},function(){return e.length>0?e.map(function(e){var i=this.state.programs.findById(e),r=t.enrollments.findById(i.id,"program_id"),a=0,n=this.state.inMatchingParticipantGroups.filter(function(t){return t.participants[0].program_id===i.id?(a+=t.participants.length,!0):!1});return React.DOM.div({className:"programs",key:"in_matching_participant_group_program_"+i.id},React.DOM.div({className:"row"},React.DOM.div({className:"col-md-12"},React.DOM.h2({className:"page-header"},i.name,React.DOM.small({className:"pull-right"},a," Participants")))),React.DOM.div({className:"row"},React.DOM.div({className:"col-md-12"},React.DOM.div({id:"participant-group-panels"},n.map(function(e){return InMatchingParticipantGroupPanel({employer:t,enrollment:r,inMatchingParticipantGroup:e,key:e.id})})))))}.bind(this)):Alert({type:"warning",message:InMatchingParticipantGroupsIndex.noResultsMessage,closeable:!1})}.bind(this)()))}});module.exports=InMatchingParticipantGroupsIndex;
},{"../actions":2,"../mixins":37,"../stores/AgeAtArrivalStore":38,"../stores/CountryStore":39,"../stores/EmployerStore":40,"../stores/EnglishLevelStore":41,"../stores/GenderStore":42,"../stores/InMatchingParticipantGroupStore":43,"../stores/ParticipantGroupNameStore":48,"../stores/PositionStore":49,"../stores/ProgramStore":50,"./Alert":3,"./BooleanFilter":5,"./CheckBoxFilter":6,"./DateRangeFilter":7,"./InMatchingParticipantGroupPanel":10,"./SearchFilter":32}],12:[function(require,module,exports){
"use strict";var dateFormat=require("../globals").dateFormat,ReadOnlyFormGroup=require("./ReadOnlyFormGroup"),PositionStore=require("../stores/PositionStore"),ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),JobOffer=React.createClass({displayName:"JobOffer",propTypes:{jobOffer:React.PropTypes.object.isRequired,jobOfferParticipantAgreement:React.PropTypes.object},render:function(){var e=null,r=PositionStore.findById(this.props.jobOffer.position_id),o=this.props.jobOfferParticipantAgreement||this.props.jobOffer.participant_agreement,a=null,t=null,p=this.props.jobOffer.href?React.DOM.a({href:this.props.jobOffer.href},"View"):null;return"yes"===this.props.jobOffer.overtime.toLowerCase()&&(e=ReadOnlyFormGroup({label:"Overtime rate per hour",value:"$"+parseFloat(this.props.jobOffer.overtime_rate).toFixed(2)})),null!=o&&(a=ReadOnlyFormGroup({label:"Signed by",value:o.full_name+" on "+Date.parse(o.created_at).toString(dateFormat)})),null!=this.props.jobOffer.file_maker_reference&&(t=ReadOnlyFormGroup({label:"Imported on",value:Date.parse(this.props.jobOffer.file_maker_reference.created_at).toString(dateFormat)})),ParticipantGroupParticipant({participant:this.props.jobOffer.participant},React.DOM.div({className:"form form-horizontal"},ReadOnlyFormGroup({label:"Position",value:r.name}),ReadOnlyFormGroup({label:"Wage per hour",value:"$"+parseFloat(this.props.jobOffer.wage).toFixed(2)}),ReadOnlyFormGroup({label:"Tipped?",value:this.props.jobOffer.tipped?"Yes":"No"}),ReadOnlyFormGroup({label:"Hours per week",value:this.props.jobOffer.hours}),ReadOnlyFormGroup({label:"Overtime?",value:this.props.jobOffer.overtime.capitaliseWord()}),e,a,t,ReadOnlyFormGroup({label:"",value:p})))}});module.exports=JobOffer;
},{"../globals":36,"../stores/PositionStore":49,"./ParticipantGroupParticipant":25,"./ReadOnlyFormGroup":30}],13:[function(require,module,exports){
"use strict";var EmployerStore=require("../stores/EmployerStore"),JobOfferGroupActions=require("../actions").JobOfferGroupActions,EmployerHeader=require("./EmployerHeader"),JobOffer=require("./JobOffer"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),JobOfferGroup=React.createClass({displayName:"JobOfferGroup",propTypes:{jobOfferGroup:React.PropTypes.object.isRequired},getInitialState:function(){return{}},handleReject:function(){this.setState({rejecting:!0})},handleCancel:function(){this.setState({rejecting:!1})},handleConfirm:function(){this.setState({sending:!0}),JobOfferGroupActions.destroy(this.props.jobOfferGroup.id)},render:function(){var e=null,r=EmployerStore.findById(this.props.jobOfferGroup.employer_id);return this.state.rejecting?e=React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-danger",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")):this.props.jobOfferGroup.can_reject&&(e=React.DOM.button({className:"btn btn-small btn-danger",onClick:this.handleReject},"Reject")),React.DOM.div({className:"panel panel-default participant-group-panel"},EmployerHeader({employer:r}),React.DOM.div({className:"list-group"},this.props.jobOfferGroup.job_offers.map(function(e){return JobOffer({jobOffer:e,key:"job_offer_"+e.id})})),ParticipantGroupPanelFooter({name:this.props.jobOfferGroup.name},e))}});module.exports=JobOfferGroup;
},{"../actions":2,"../stores/EmployerStore":40,"./EmployerHeader":8,"./JobOffer":12,"./ParticipantGroupPanelFooter":24}],14:[function(require,module,exports){
"use strict";var actions=require("../actions"),SetUrlsMixin=require("../mixins").SetUrlsMixin,SearchFilter=require("./SearchFilter"),CheckBoxFilter=require("./CheckBoxFilter"),JobOfferGroupsPanel=require("./JobOfferGroupsPanel"),JobOfferSignedStore=require("../stores/JobOfferSignedStore"),ProgramStore=require("../stores/ProgramStore"),EmployerStore=require("../stores/EmployerStore"),StaffStore=require("../stores/StaffStore"),JobOfferGroupsIndex=React.createClass({displayName:"JobOfferGroupsIndex",mixins:[SetUrlsMixin],render:function(){return React.DOM.div({className:"row"},React.DOM.div({className:"col-md-3"},SearchFilter({title:"Search",searchOn:"participant_names",actions:actions.JobOfferGroupActions}),CheckBoxFilter({title:"Participant Agreement",store:JobOfferSignedStore,actions:actions.JobOfferSignedActions}),CheckBoxFilter({title:"Program",store:ProgramStore,actions:actions.ProgramActions}),CheckBoxFilter({title:"Employer",store:EmployerStore,actions:actions.EmployerActions}),CheckBoxFilter({title:"Coordinator",store:StaffStore,actions:actions.StaffActions})),React.DOM.div({className:"col-md-9"},JobOfferGroupsPanel(null)))}});module.exports=JobOfferGroupsIndex;
},{"../actions":2,"../mixins":37,"../stores/EmployerStore":40,"../stores/JobOfferSignedStore":46,"../stores/ProgramStore":50,"../stores/StaffStore":51,"./CheckBoxFilter":6,"./JobOfferGroupsPanel":15,"./SearchFilter":32}],15:[function(require,module,exports){
"use strict";var actions=require("../actions"),JobOfferGroupStore=require("../stores/JobOfferGroupStore"),ProgramStore=require("../stores/ProgramStore"),PositionStore=require("../stores/PositionStore"),EmployerStore=require("../stores/EmployerStore"),StaffStore=require("../stores/StaffStore"),RenderLoadedMixin=require("../mixins").RenderLoadedMixin,ProgramHeader=require("./ProgramHeader"),JobOfferGroup=require("./JobOfferGroup"),JobOfferGroupsPanel=React.createClass({displayName:"JobOfferGroupsPanel",mixins:[Reflux.connect(JobOfferGroupStore,"jobOfferGroups"),Reflux.connect(ProgramStore,"programs"),Reflux.connect(PositionStore,"positions"),Reflux.connect(EmployerStore,"employers"),Reflux.connect(StaffStore,"staffs"),RenderLoadedMixin("jobOfferGroups","programs","positions","employers","staffs")],componentDidMount:function(){actions.JobOfferGroupActions.ajaxLoad(actions.loadFromJobOfferGroups),actions.PositionActions.ajaxLoad()},renderLoaded:function(){return React.DOM.div({id:"participant-group-panels"},this.state.programs.map(function(r){var o=this.state.jobOfferGroups.filter(function(o){return o.program_id===r.id});return o.length>0?React.DOM.div(null,ProgramHeader({program:r,collectionName:"Job Offer",collection:o.mapAttribute("job_offers").flatten()}),o.map(function(o){return JobOfferGroup({jobOfferGroup:o,key:"program_job_offer_group"+r.id+"-"+o.id})})):void 0},this))}});module.exports=JobOfferGroupsPanel;
},{"../actions":2,"../mixins":37,"../stores/EmployerStore":40,"../stores/JobOfferGroupStore":44,"../stores/PositionStore":49,"../stores/ProgramStore":50,"../stores/StaffStore":51,"./JobOfferGroup":13,"./ProgramHeader":28}],16:[function(require,module,exports){
"use strict";var EmployerStore=require("../stores/EmployerStore"),EmployerHeader=require("./EmployerHeader"),JobOffer=require("./JobOffer"),JobOfferParticipantAgreement=React.createClass({displayName:"JobOfferParticipantAgreement",propTypes:{jobOfferParticipantAgreement:React.PropTypes.object.isRequired},getInitialState:function(){return{}},render:function(){var e=EmployerStore.findById(this.props.jobOfferParticipantAgreement.job_offer.employer_id);return React.DOM.div({className:"panel panel-default participant-group-panel"},EmployerHeader({employer:e}),React.DOM.div({className:"list-group"},JobOffer({jobOffer:this.props.jobOfferParticipantAgreement.job_offer,jobOfferParticipantAgreement:this.props.jobOfferParticipantAgreement})))}});module.exports=JobOfferParticipantAgreement;
},{"../stores/EmployerStore":40,"./EmployerHeader":8,"./JobOffer":12}],17:[function(require,module,exports){
"use strict";var actions=require("../actions"),mixins=require("../mixins"),JobOfferParticipantAgreementStore=require("../stores/JobOfferParticipantAgreementStore"),JobOfferParticipantAgreementsPanel=require("./JobOfferParticipantAgreementsPanel"),SearchFilter=require("./SearchFilter"),CheckBoxFilter=require("./CheckBoxFilter"),BooleanFilter=require("./BooleanFilter"),ExportButton=require("./ExportButton"),ProgramStore=require("../stores/ProgramStore"),JobOfferParticipantAgreementsIndex=React.createClass({displayName:"JobOfferParticipantAgreementsIndex",mixins:[mixins.SetUrlsMixin,Reflux.connect(JobOfferParticipantAgreementStore,"jobOfferParticipantAgreements")],render:function(){var e=this.state.jobOfferParticipantAgreements?this.state.jobOfferParticipantAgreements.mapAttribute("job_offer").mapAttribute("id"):[];return React.DOM.div({className:"row"},React.DOM.div({className:"col-md-3"},SearchFilter({title:"Search",searchOn:[["job_offer","participant","name"],["job_offer","participant","email"],["job_offer","participant","uuid"]],actions:actions.JobOfferParticipantAgreementActions}),CheckBoxFilter({title:"Program",store:ProgramStore,actions:actions.ProgramActions}),BooleanFilter({title:"FileMaker",label:"Not in FileMaker",action:JobOfferParticipantAgreementStore.toggleNotInFileMaker}),ExportButton({url:this.props.urls["export"],ids:e})),React.DOM.div({className:"col-md-9"},JobOfferParticipantAgreementsPanel({jobOfferParticipantAgreements:this.state.jobOfferParticipantAgreements})))}});module.exports=JobOfferParticipantAgreementsIndex;
},{"../actions":2,"../mixins":37,"../stores/JobOfferParticipantAgreementStore":45,"../stores/ProgramStore":50,"./BooleanFilter":5,"./CheckBoxFilter":6,"./ExportButton":9,"./JobOfferParticipantAgreementsPanel":18,"./SearchFilter":32}],18:[function(require,module,exports){
"use strict";var actions=require("../actions"),mixins=require("../mixins"),ProgramStore=require("../stores/ProgramStore"),PositionStore=require("../stores/PositionStore"),EmployerStore=require("../stores/EmployerStore"),StaffStore=require("../stores/StaffStore"),ProgramHeader=require("./ProgramHeader"),JobOfferParticipantAgreement=require("./JobOfferParticipantAgreement"),JobOfferParticipantAgreementsPanel=React.createClass({displayName:"JobOfferParticipantAgreementsPanel",mixins:[Reflux.connect(ProgramStore,"programs"),Reflux.connect(PositionStore,"positions"),Reflux.connect(EmployerStore,"employers"),Reflux.connect(StaffStore,"staffs"),mixins.RenderLoadedMixin("programs","positions","employers","staffs")],propTypes:{jobOfferParticipantAgreements:React.PropTypes.array.isRequired},componentDidMount:function(){actions.JobOfferParticipantAgreementActions.ajaxLoad(actions.loadFromJobOfferParticipantAgreements),actions.PositionActions.ajaxLoad()},renderLoaded:function(){return React.DOM.div({id:"participant-group-panels"},this.state.programs.map(function(e){var r=this.props.jobOfferParticipantAgreements.filter(function(r){return r.job_offer.participant.program_id===e.id});return r.length>0?React.DOM.div({key:"program_"+e.id},ProgramHeader({program:e,collectionName:"Participant Agreement",collection:r}),r.map(function(e){return JobOfferParticipantAgreement({jobOfferParticipantAgreement:e,key:"jobOfferParticipantAgreement_"+e.id})})):void 0},this))}});module.exports=JobOfferParticipantAgreementsPanel;
},{"../actions":2,"../mixins":37,"../stores/EmployerStore":40,"../stores/PositionStore":49,"../stores/ProgramStore":50,"../stores/StaffStore":51,"./JobOfferParticipantAgreement":16,"./ProgramHeader":28}],19:[function(require,module,exports){
"use strict";var LinkToIf=React.createClass({displayName:"LinkToIf",propTypes:{name:React.PropTypes.string.isRequired,href:React.PropTypes.string},render:function(){return this.props.href?React.DOM.span(null,React.DOM.a({href:this.props.href},this.props.name)):React.DOM.span(null,this.props.name)}});module.exports=LinkToIf;
},{}],20:[function(require,module,exports){
"use strict";var actions=require("../actions"),EmployerStore=require("../stores/EmployerStore"),PositionStore=require("../stores/PositionStore"),EmployerHeader=require("./EmployerHeader"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),OfferedParticipantGroupParticipant=require("./OfferedParticipantGroupParticipant"),Alert=require("./Alert"),OfferedParticipantGroupPanel=React.createClass({displayName:"OfferedParticipantGroupPanel",propTypes:{offeredParticipantGroup:React.PropTypes.object.isRequired},getInitialState:function(){return{puttingOnReview:!1,rejecting:!1,sending:!1,sendingJobOffer:!1}},hasJobOffers:function(){return this.props.offeredParticipantGroup.job_offers.length>0},handleSendToParticipant:function(){this.setState({sendingJobOffer:!0})},handleReject:function(){this.setState({rejecting:!0})},handleCancel:function(){this.setState({sendingJobOffer:!1,rejecting:!1})},handleConfirm:function(){this.setState({sending:!0});var t=this.getDOMNode();this.state.sendingJobOffer?actions.JobOfferGroupActions.create({offered_participant_group_id:this.props.offeredParticipantGroup.id},function(t){this.setState({status:t.responseJSON.status})}.bind(this)):this.state.rejecting&&actions.OfferedParticipantGroupActions.reject(this.props.offeredParticipantGroup.id,function(){React.unmountComponentAtNode(t),$(t).remove()})},render:function(){var t,e=this.props.offeredParticipantGroup.name,i=EmployerStore.findById(this.props.offeredParticipantGroup.employer_id),a=this.props.offeredParticipantGroup.draft_job_offers,n=this.props.offeredParticipantGroup.participants,r=a.map(function(t){var e=n.findById(t.participant_id),i=PositionStore.findById(t.position_id);return OfferedParticipantGroupParticipant({key:e.id,participant:e,position:i,offer:t,offerLinkTitle:"Preview"})}.bind(this));if(this.state.status){var s=this.state.status;return Alert({type:s.type,message:s.message,instructions:s.instructions,actionTitle:s.action.title,actionUrl:s.action.url})}return t=this.state.sendingJobOffer?React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-success",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")):this.state.rejecting?React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-danger",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")):this.props.offeredParticipantGroup.can_send?i.vetted?React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-success",onClick:this.handleSendToParticipant},"Send to Participant"),React.DOM.button({className:"btn btn-danger",onClick:this.handleReject},"Reject")):React.DOM.div(null,React.DOM.span({className:"label label-warning pull-left"},"Employer Not Vetted"),React.DOM.button({className:"btn btn-small btn-danger",onClick:this.handleReject},"Reject")):null,React.DOM.div({className:"panel panel-default participant-group-panel"},EmployerHeader({employer:i}),React.DOM.div({className:"list-group"},r),ParticipantGroupPanelFooter({name:e},t))}});module.exports=OfferedParticipantGroupPanel;
},{"../actions":2,"../stores/EmployerStore":40,"../stores/PositionStore":49,"./Alert":3,"./EmployerHeader":8,"./OfferedParticipantGroupParticipant":21,"./ParticipantGroupPanelFooter":24}],21:[function(require,module,exports){
"use strict";var ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ReadOnlyFormGroup=require("./ReadOnlyFormGroup"),dateFormat=require("../globals").dateFormat,OfferedParticipantGroupParticipant=React.createClass({displayName:"OfferedParticipantGroupParticipant",propTypes:{offer:React.PropTypes.object.isRequired,participant:React.PropTypes.object.isRequired,position:React.PropTypes.object.isRequired,jobOfferParticipantAgreement:React.PropTypes.object,jobOfferFileMakerReference:React.PropTypes.object},getInitialState:function(){return{}},render:function(){var e=null,r=null,t=null,a=this.props.offer.href?React.DOM.a({href:this.props.offer.href},this.props.offerLinkTitle):null;return"yes"===this.props.offer.overtime&&(e=ReadOnlyFormGroup({label:"Overtime rate per hour",value:"$"+parseFloat(this.props.offer.overtime_rate).toFixed(2)})),null!=this.props.jobOfferParticipantAgreement&&(r=ReadOnlyFormGroup({label:"Signed by",value:this.props.jobOfferParticipantAgreement.full_name+" on "+Date.parse(this.props.jobOfferParticipantAgreement.created_at).toString(dateFormat)})),null!=this.props.jobOfferFileMakerReference&&(t=ReadOnlyFormGroup({label:"Imported on",value:Date.parse(this.props.jobOfferFileMakerReference.created_at).toString(dateFormat)})),ParticipantGroupParticipant({participant:this.props.participant},React.DOM.div({className:"form form-horizontal"},ReadOnlyFormGroup({label:"Position",value:this.props.position.name}),ReadOnlyFormGroup({label:"Wage per hour",value:"$"+parseFloat(this.props.offer.wage).toFixed(2)}),ReadOnlyFormGroup({label:"Tipped?",value:this.props.offer.tipped?"Yes":"No"}),ReadOnlyFormGroup({label:"Hours per week",value:this.props.offer.hours}),ReadOnlyFormGroup({label:"Overtime?",value:this.props.offer.overtime.capitaliseWord()}),e,r,t,ReadOnlyFormGroup({label:"",value:a})))}});module.exports=OfferedParticipantGroupParticipant;
},{"../globals":36,"./ParticipantGroupParticipant":25,"./ReadOnlyFormGroup":30}],22:[function(require,module,exports){
"use strict";var actions=require("../actions"),mixins=require("../mixins"),SearchFilter=require("./SearchFilter"),CheckBoxFilter=require("./CheckBoxFilter"),OfferedParticipantGroupStore=require("../stores/OfferedParticipantGroupStore"),ProgramStore=require("../stores/ProgramStore"),PositionStore=require("../stores/PositionStore"),EmployerStore=require("../stores/EmployerStore"),StaffStore=require("../stores/StaffStore"),OfferedParticipantGroupPanel=require("./OfferedParticipantGroupPanel"),OfferedParticipantGroupsIndex=React.createClass({displayName:"OfferedParticipantGroupsIndex",mixins:[Reflux.connect(OfferedParticipantGroupStore,"offeredParticipantGroups"),Reflux.connect(ProgramStore,"programs"),Reflux.connect(PositionStore,"positions"),Reflux.connect(EmployerStore,"employers"),Reflux.connect(StaffStore,"staffs"),mixins.RenderLoadedMixin("offeredParticipantGroups","programs","positions","staffs","employers")],componentDidMount:function(){actions.setUrls(this.props.urls),actions.OfferedParticipantGroupActions.ajaxLoad(actions.loadFromOfferedParticipantGroups),actions.PositionActions.ajaxLoad()},renderLoaded:function(){return React.DOM.div({className:"row"},React.DOM.div({className:"col-md-3"},SearchFilter({title:"offered_names",searchOn:["participant_names","participant_emails","participant_uuids"],store:OfferedParticipantGroupStore,actions:actions.OfferedParticipantGroupActions}),CheckBoxFilter({title:"Program",store:ProgramStore,actions:actions.ProgramActions}),CheckBoxFilter({title:"Coordinator",store:StaffStore,actions:actions.StaffActions}),CheckBoxFilter({title:"Employer",store:EmployerStore,actions:actions.EmployerActions})),React.DOM.div({className:"col-md-9"},React.DOM.div({id:"participant-group-panels"},this.state.programs.map(function(e){var r=this.state.offeredParticipantGroups.filter(function(r){return r.participants[0].program_id===e.id});return 0===r.length?null:React.DOM.div(null,React.DOM.h2({className:"page-header"},e.name,React.DOM.small({className:"pull-right"},r.mapAttribute("draft_job_offers").flatten().mapAttribute("participant_ids").flatten().length," Offered")),r.map(function(e){return OfferedParticipantGroupPanel({offeredParticipantGroup:e,key:"offered_participant_group_"+e.id})}))},this))))}});module.exports=OfferedParticipantGroupsIndex;
},{"../actions":2,"../mixins":37,"../stores/EmployerStore":40,"../stores/OfferedParticipantGroupStore":47,"../stores/PositionStore":49,"../stores/ProgramStore":50,"../stores/StaffStore":51,"./CheckBoxFilter":6,"./OfferedParticipantGroupPanel":20,"./SearchFilter":32}],23:[function(require,module,exports){
"use strict";var ParticipantGroupParticipantOffering=require("./ParticipantGroupParticipantOffering"),ParticipantGroupParticipantDeclining=require("./ParticipantGroupParticipantDeclining"),ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),Alert=require("./Alert"),Spinner=require("./Spinner"),OnReviewParticipantGroupPanelHeading=React.createClass({displayName:"OnReviewParticipantGroupPanelHeading",render:function(){return React.DOM.div({className:"panel-heading text-right"},React.DOM.h1({className:"panel-title"},"On Review until ",React.DOM.strong(null,this.props.data.expires_on)))}}),OnReviewParticipantGroupPanelListGroup=React.createClass({displayName:"OnReviewParticipantGroupPanelListGroup",mixins:[React.addons.LinkedStateMixin],propTypes:{draftJobOfferValidState:React.PropTypes.object.isRequired,isOfferingState:React.PropTypes.object.isRequired,isDecliningState:React.PropTypes.object.isRequired,data:React.PropTypes.object.isRequired},getInitialState:function(){for(var e={},t=0;t<this.props.data.participants.length;t++)e[this.stateName(t)]=!1;return e},stateName:function(e){return"participantValid"+e.toString()},isFormValid:function(){for(var e=0;e<this.props.data.participants.length;e++)if(!this.state[this.stateName(e)])return!1;return!0},componentDidUpdate:function(){var e=this.isFormValid();this.props.draftJobOfferValidState.value!==e&&this.props.draftJobOfferValidState.requestChange(e)},render:function(){var e=this.props.data.participants.map(function(e,t){return this.props.isOfferingState.value?ParticipantGroupParticipantOffering({validationState:this.linkState(this.stateName(t)),key:e.id,data:e}):this.props.isDecliningState.value?ParticipantGroupParticipantDeclining({key:e.id,data:e}):ParticipantGroupParticipant({key:e.id,participant:e})}.bind(this));return React.DOM.div({className:"list-group"},e)}}),OnReviewParticipantGroupPanelFooterButtonsOfferDecline=React.createClass({displayName:"OnReviewParticipantGroupPanelFooterButtonsOfferDecline",offerClick:function(){this.props.isOfferingState.requestChange(!this.props.isOfferingState.value),Intercom("trackEvent","clicked-employer-participants-offer",{employer_id:this.props.employerId,employer_name:this.props.employerName,participant_names:this.props.participantNames})},declineClick:function(){this.props.isDecliningState.requestChange(!this.props.isDecliningState.value),Intercom("trackEvent","clicked-employer-participants-decline",{employer_id:this.props.employerId,employer_name:this.props.employerName,participant_names:this.props.participantNames})},render:function(){return React.DOM.div({className:"btn-group clearfix"},React.DOM.button({className:"btn btn-success",onClick:this.offerClick},"Offer"),React.DOM.button({className:"btn btn-danger",onClick:this.declineClick},"Decline"))}}),OnReviewParticipantGroupPanelFooterButtonsConfirmCancel=React.createClass({displayName:"OnReviewParticipantGroupPanelFooterButtonsConfirmCancel",onClick:function(){this.props.isOfferingState.requestChange(!this.props.isOfferingState.value),Intercom("trackEvent","canceled-employer-participants-offer",{employer_id:this.props.employerId,employer_name:this.props.employerName,participant_names:this.props.participantNames})},render:function(){var e=React.DOM.input(this.props.draftJobOfferValidState.value?{className:"btn btn-success",type:"submit",value:"Confirm"}:{className:"btn btn-success",type:"submit",value:"Confirm",disabled:"disabled"});return React.DOM.div({className:"btn-group clearfix"},e,React.DOM.button({className:"btn btn-default",onClick:this.onClick},"Cancel"))}}),OnReviewParticipantGroupPanelFooterButtonsDeclineCancel=React.createClass({displayName:"OnReviewParticipantGroupPanelFooterButtonsDeclineCancel",onClick:function(){this.props.isDecliningState.requestChange(!this.props.isDecliningState.value),Intercom("trackEvent","canceled-employer-participants-decline",{employer_id:this.props.employerId,employer_name:this.props.employerName,participant_names:this.props.participantNames})},render:function(){return React.DOM.div({className:"btn-group clearfix"},React.DOM.input({className:"btn btn-danger",type:"submit",value:"Decline"}),React.DOM.button({className:"btn btn-default",onClick:this.onClick},"Cancel"))}}),OnReviewParticipantGroupPanelFooter=React.createClass({displayName:"OnReviewParticipantGroupPanelFooter",render:function(){var e=this.props.isOfferingState,t=this.props.isDecliningState,i=this.props.draftJobOfferValidState,a=this.props.data.name+(null!=this.props.data.program?" - "+this.props.data.program.name:""),r=function(a){return e.value?OnReviewParticipantGroupPanelFooterButtonsConfirmCancel({data:a,employerId:this.props.employerId,employerName:this.props.employerName,participantNames:this.props.participantNames,draftJobOfferValidState:i,isOfferingState:e}):t.value?OnReviewParticipantGroupPanelFooterButtonsDeclineCancel({data:a,employerId:this.props.employerId,employerName:this.props.employerName,participantNames:this.props.participantNames,isDecliningState:t}):OnReviewParticipantGroupPanelFooterButtonsOfferDecline({data:a,employerId:this.props.employerId,employerName:this.props.employerName,participantNames:this.props.participantNames,isOfferingState:e,isDecliningState:t})}.bind(this)(),n=function(){return e.value?React.DOM.small(null,"By clicking offer I agree that the information entered is true and accurate to the best of my knowledge and that I will contact InterExchange if any information changes."):t.value?React.DOM.span(null,"Are you sure you want to decline this participant?"):void 0}();return ParticipantGroupPanelFooter({name:a},r,n)}}),OnReviewParticipantGroupPanel=React.createClass({displayName:"OnReviewParticipantGroupPanel",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){return{isOffering:!1,isDeclining:!1,draftJobOfferValid:!1}},participantNames:function(){return this.props.data.participants.map(function(e){return e.name}).join(", ")},handleSubmit:function(e){e.preventDefault();var t=$(e.target),i=null,a=null,r=null;if(this.state.isOffering)r="/offered_participant_groups.json",a="confirmed-employer-participants-offer",i={offered_participant_group:$.extend({employer_id:this.props.employerId,on_review_participant_group_id:this.props.data.id},t.serializeJSON())};else{if(!this.state.isDeclining)return;r="/on_review_participant_groups/"+this.props.data.id+".json",a="confirmed-employer-participants-decline",i={_method:"DELETE",on_review_participant_group:t.serializeJSON()}}$.ajax({url:r,type:"POST",data:i,success:function(e){this.setState({status:e.status}),Intercom("trackEvent",a,{employer_id:this.props.employerId,employer_name:this.props.employerName,participant_names:this.participantNames()})}.bind(this),error:function(e){console.log(e)}})},render:function(){var e=this.linkState("isOffering"),t=this.linkState("isDeclining"),i=this.linkState("draftJobOfferValid");if(this.state.status){var a=this.state.status;return Alert({type:a.type,message:a.message,instructions:a.instructions,actionTitle:a.action.title,actionUrl:a.action.url})}return React.DOM.form({className:"panel panel-default participant-group-panel form-horizontal",role:"form",onSubmit:this.handleSubmit},OnReviewParticipantGroupPanelHeading({data:this.props.data}),OnReviewParticipantGroupPanelListGroup({data:this.props.data,isOfferingState:e,isDecliningState:t,draftJobOfferValidState:i}),OnReviewParticipantGroupPanelFooter({data:this.props.data,employerId:this.props.employerId,employerName:this.props.employerName,participantNames:this.participantNames(),isOfferingState:e,isDecliningState:t,draftJobOfferValidState:i}))}}),OnReviewParticipantGroupPanels=React.createClass({displayName:"OnReviewParticipantGroupPanels",getInitialState:function(){return{groups:null}},componentDidMount:function(){$.get(this.props.source,function(e){this.isMounted()&&this.setState({groups:e.on_review_participant_groups})}.bind(this))},render:function(){if(this.isMounted()){var e=this.props.employerId,t=this.props.employerName;return React.DOM.div({id:"participant-group-panels"},this.state.groups.map(function(i){return OnReviewParticipantGroupPanel({key:i.id,data:i,employerId:e,employerName:t})}))}return Spinner(null)}});module.exports=OnReviewParticipantGroupPanels;
},{"./Alert":3,"./ParticipantGroupPanelFooter":24,"./ParticipantGroupParticipant":25,"./ParticipantGroupParticipantDeclining":26,"./ParticipantGroupParticipantOffering":27,"./Spinner":33}],24:[function(require,module,exports){
"use strict";var ParticipantGroupPanelFooterName=React.createClass({displayName:"ParticipantGroupPanelFooterName",propTypes:{name:React.PropTypes.string.isRequired},render:function(){return React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-6 col-sm-6"},React.DOM.div({className:"panel-title pull-left",style:{whiteSpace:"nowrap"}},this.props.name)),React.DOM.div({className:"col-xs-6 col-sm-6"},React.DOM.div({className:"pull-right"},this.props.children)))}}),ParticipantGroupPanelFooter=React.createClass({displayName:"ParticipantGroupPanelFooter",propTypes:{name:React.PropTypes.string.isRequired},render:function(){var e=this.props.name,a=React.Children.map(this.props.children,function(a,t){return null!=a?0===t?ParticipantGroupPanelFooterName({name:e},a):React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-12 text-right"},React.DOM.hr(null),a)):void 0})||ParticipantGroupPanelFooterName({name:e});return React.DOM.div({className:"panel-footer clearfix"},a)}});module.exports=ParticipantGroupPanelFooter;
},{}],25:[function(require,module,exports){
"use strict";var dateFormat=require("../globals").dateFormat,LinkToIf=require("./LinkToIf"),YearCalculator=require("./YearCalculator"),ParticipantGroupParticipant=React.createClass({displayName:"ParticipantGroupParticipant",propTypes:{participant:React.PropTypes.object.isRequired},render:function(){var a=this.props.participant,e=React.Children.count(this.props.children)>0?React.DOM.hr(null):null;return React.DOM.div({className:"list-group-item list-group-item-participant","data-participant-name":a.name},React.DOM.div({className:"media"},React.DOM.img({className:"media-object img-circle img-thumbnail pull-left",src:a.photo_url+"/convert?h=100&w=100&fit=crop",alt:a.name}),React.DOM.div({className:"media-body"},React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-12"},React.DOM.h4({className:"media-heading"},LinkToIf({name:a.name,href:a.href})))),React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-12 col-md-6"},React.DOM.strong(null,a.country_name),React.DOM.br(null),React.DOM.strong(null,YearCalculator({from:a.date_of_birth,to:a.arrival_date})),React.DOM.strong({style:{paddingLeft:"5px"}},a.gender))),React.DOM.hr(null),React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-12 col-md-4 col-md-offset-4"},React.DOM.div({className:"row text-right"},React.DOM.div({className:"col-xs-6 col-md-10"},React.DOM.strong(null,"English ",React.DOM.span({className:"hidden-xs"},"Level")," ")),React.DOM.div({className:"col-xs-6 col-md-2"},React.DOM.span(null,a.english_level)))),React.DOM.div({className:"col-xs-12 col-md-4"},React.DOM.div({className:"row text-right"},React.DOM.div({className:"col-xs-6 col-md-5 col-lg-7"},React.DOM.strong(null,"Availability")),React.DOM.div({className:"col-xs-6 col-md-7 col-lg-5"},React.DOM.span(null,Date.parse(a.arrival_date).add(2).days().toString(dateFormat)),React.DOM.br(null),React.DOM.span(null,Date.parse(a.departure_date).toString(dateFormat)))))),e,React.Children.map(this.props.children,function(a){return React.DOM.div({className:"row"},React.DOM.div({className:"col-xs-12"},a))}))))}});module.exports=ParticipantGroupParticipant;
},{"../globals":36,"./LinkToIf":19,"./YearCalculator":35}],26:[function(require,module,exports){
"use strict";var ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ParticipantGroupParticipantDecliningForm=React.createClass({displayName:"ParticipantGroupParticipantDecliningForm",getInitialState:function(){return{reason:"Unselected",isOtherReason:!1}},handleChange:function(a){this.setState({reason:a.target.value,isOtherReason:0===a.target.value.length})},componentDidUpdate:function(){this.state.isOtherReason&&$(this.getDOMNode()).find('input[type="text"]').focus(),$(this.getDOMNode()).find('input[type="text"]').val(this.state.reason)},render:function(){var a=this.state.isOtherReason?"show":"hidden";return React.DOM.div(null,React.DOM.div({className:"form-group"},React.DOM.label({className:"col-xs-12 col-sm-4 control-label"},"Reason"),RadioGroup({className:"col-xs-12 col-sm-8",defaultValue:this.state.reason,onChange:this.handleChange,name:"rejections["+this.props.data.id+"][option]"},React.DOM.div({className:"radio"},React.DOM.label(null,React.DOM.input({type:"radio",value:"Filled this position"})," Filled this position")),React.DOM.div({className:"radio"},React.DOM.label(null,React.DOM.input({type:"radio",value:"Unsuitable work dates"})," Unsuitable work dates")),React.DOM.div({className:"radio"},React.DOM.label(null,React.DOM.input({type:"radio",value:"Unsuitable English"})," Unsuitable English")),React.DOM.div({className:"radio"},React.DOM.label(null,React.DOM.input({type:"radio",value:""})," Other")))),ReactBootstrap.Input({name:"rejections["+this.props.data.id+"][reason]",id:"rejection_reason_"+this.props.data.id,label:"Please specify",labelClassName:"col-sm-4 "+a,type:"text",wrapperClassName:"col-sm-8 "+a}))}}),ParticipantGroupParticipantDeclining=React.createClass({displayName:"ParticipantGroupParticipantDeclining",render:function(){return ParticipantGroupParticipant({participant:this.props.data},ParticipantGroupParticipantDecliningForm({data:this.props.data}))}});module.exports=ParticipantGroupParticipantDeclining;
},{"./ParticipantGroupParticipant":25}],27:[function(require,module,exports){
"use strict";var ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),RadioGroupButton=require("./RadioGroupButton"),ValidatingFormGroup=require("./ValidatingFormGroup"),ValidatingInputMixin=require("../mixins").ValidatingInputMixin,validateMoney=function(t){return t&&!/^\d+([\.,]\d{1,2})?$/.test(t)?"error":void 0},validateNumber=function(t){return t&&!/^\d+(\.\d+)?$/.test(t)?"error":void 0},draftJobOfferFormName=function(t,e){return"draft_job_offers["+t+"]["+e+"]"},draftJobOfferFormId=function(t,e){return"draft_job_offers_"+t+"_"+e},ParticipantGroupParticipantOfferingFormTipped=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormTipped",mixins:[ValidatingInputMixin],validate:function(){return!0},render:function(){var t=this.props.resourceId;return React.DOM.div({className:"form-group"},React.DOM.label({className:"col-xs-12 col-sm-4 control-label",htmlFor:draftJobOfferFormName(t,"tipped")},"Tipped?"),React.DOM.div({className:"col-xs-12 col-sm-8"},RadioGroup({name:draftJobOfferFormName(t,"tipped"),id:draftJobOfferFormId(t,"tipped"),className:"btn-group btn-group-justified",onChange:this.handleChange},RadioGroupButton({title:"Yes",inputValue:"true",iconClass:"fa fa-check text-success",id:draftJobOfferFormId(t,"tipped")+"_yes",htmlFor:draftJobOfferFormId(t,"tipped")+"_yes"}),RadioGroupButton({title:"No",inputValue:"false",iconClass:"fa fa-close text-danger",id:draftJobOfferFormId(t,"tipped")+"_no",htmlFor:draftJobOfferFormId(t,"tipped")+"_no"}))))}}),ParticipantGroupParticipantOfferingFormHours=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormHours",statics:{validates:!0},getInitialState:function(){return{hours:null}},handleChange:function(t){var e=this.validate(t.target.value);this.setState({hours:t.target.value}),this.props.validationState.requestChange(e)},validate:function(t){return null!==t&&t.length>0&&"error"!==validateNumber(t)},render:function(){var t=this.props.resourceId;return ReactBootstrap.Input({name:draftJobOfferFormName(t,"hours"),id:draftJobOfferFormId(t,"hours"),value:this.state.value,label:"Hours per week",hasFeedback:!0,bsStyle:validateNumber(this.state.value),labelClassName:"col-sm-4",type:"text",step:"1",wrapperClassName:"col-sm-8",onChange:this.handleChange})}}),ParticipantGroupParticipantOfferingFormOvertime=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormOvertime",statics:{validates:!0},getInitialState:function(){return{overtime:null}},handleChange:function(t){var e=t.target.value;this.setState({overtime:e}),this.props.validationState.requestChange("no"===e||"maybe"===e)},validate:function(){return null!==this.state.overtime&&this.state.overtime.length>0},render:function(){var t=this.props.resourceId,e="yes"===this.state.overtime?React.Children.map(this.props.children,function(t){return React.addons.cloneWithProps(t,{validationState:this.props.validationState,resourceId:this.props.resourceId})}.bind(this)):null;return React.DOM.div(null,React.DOM.div({className:"form-group"},React.DOM.label({className:"col-sm-4 control-label",htmlFor:draftJobOfferFormId(t,"overtime")},"Overtime?"),React.DOM.div({className:"col-sm-8"},RadioGroup({name:draftJobOfferFormName(t,"overtime"),id:draftJobOfferFormId(t,"overtime"),value:this.state.overtime,className:"btn-group btn-group-justified",onChange:this.handleChange},RadioGroupButton({title:"Yes",inputValue:"yes",iconClass:"fa fa-check text-success",id:draftJobOfferFormId(t,"overtime")+"_yes",htmlFor:draftJobOfferFormId(t,"overtime")+"_yes"}),RadioGroupButton({title:"No",inputValue:"no",iconClass:"fa fa-close text-danger",id:draftJobOfferFormId(t,"overtime")+"_no",htmlFor:draftJobOfferFormId(t,"overtime")+"_no"}),RadioGroupButton({title:"Maybe",inputValue:"maybe",iconClass:"fa fa-question text-danger",id:draftJobOfferFormId(t,"overtime")+"_maybe",htmlFor:draftJobOfferFormId(t,"overtime")+"_maybe"})))),e)}}),ParticipantGroupParticipantOfferingFormOvertimeRate=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormOvertimeRate",mixins:[ValidatingInputMixin],validate:function(t){return null!==t&&t.length>0&&"error"!==validateMoney(t)},render:function(){var t=this.props.resourceId;return ReactBootstrap.Input({name:draftJobOfferFormName(t,"overtime_rate"),id:draftJobOfferFormId(t,"overtime_rate"),value:this.state.value,hasFeedback:!0,bsStyle:validateMoney(this.state.value),onChange:this.handleChange,label:"Overtime rate per hour",addonBefore:"$",type:"text",labelClassName:"col-sm-4",wrapperClassName:"col-sm-8"})}}),ParticipantGroupParticipantOfferingFormPosition=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormPosition",mixins:[ValidatingInputMixin],validate:function(t){return null!==t&&t.length>0},render:function(){return ReactBootstrap.Input({name:draftJobOfferFormName(this.props.resourceId,"position_id"),id:draftJobOfferFormId(this.props.resourceId,"position_id"),defaultValue:this.state.position_id,label:"Position",help:"You can offer a participant any position they are interested in.",onChange:this.handleChange,type:"select",labelClassName:"col-sm-4",wrapperClassName:"col-sm-8"},React.DOM.option({disabled:"disabled"}),this.props.positions.map(function(t){return React.DOM.option({value:t.id,key:"offering_form_position_"+this.props.resourceId+"_"+t.id},t.name)}.bind(this)))}}),ParticipantGroupParticipantOfferingFormWage=React.createClass({displayName:"ParticipantGroupParticipantOfferingFormWage",mixins:[ValidatingInputMixin],validate:function(t){return null!==t&&t.length>0&&"error"!==validateMoney(t)},render:function(){return ReactBootstrap.Input({name:draftJobOfferFormName(this.props.resourceId,"wage"),id:draftJobOfferFormId(this.props.resourceId,"wage"),defaultValue:this.state.value,hasFeedback:!0,bsStyle:validateMoney(this.state.value),onChange:this.handleChange,label:"Wage per hour",labelClassName:"col-sm-4",addonBefore:"$",type:"text",wrapperClassName:"col-sm-8"})}}),ParticipantGroupParticipantOffering=React.createClass({displayName:"ParticipantGroupParticipantOffering",render:function(){return ParticipantGroupParticipant({participant:this.props.data},ValidatingFormGroup({validationState:this.props.validationState,resourceId:this.props.data.id},ReactBootstrap.Input({name:draftJobOfferFormName(this.props.data.id,"participant_id"),id:draftJobOfferFormId(this.props.data.id,"participant_id"),defaultValue:this.props.data.id,type:"hidden"}),ParticipantGroupParticipantOfferingFormPosition({positions:this.props.data.positions}),ParticipantGroupParticipantOfferingFormWage(null),ParticipantGroupParticipantOfferingFormTipped(null),ParticipantGroupParticipantOfferingFormHours(null),ParticipantGroupParticipantOfferingFormOvertime(null,ParticipantGroupParticipantOfferingFormOvertimeRate(null))))}});module.exports=ParticipantGroupParticipantOffering;
},{"../mixins":37,"./ParticipantGroupParticipant":25,"./RadioGroupButton":29,"./ValidatingFormGroup":34}],28:[function(require,module,exports){
"use strict";var ProgramHeader=React.createClass({displayName:"ProgramHeader",propTypes:{program:React.PropTypes.object.isRequired,collectionName:React.PropTypes.string.isRequired,collection:React.PropTypes.array.isRequired},programName:function(){return this.props.program.name},collectionName:function(){return this.props.collectionName.pluralize(this.collectionLength())},collectionLength:function(){return this.props.collection.length},render:function(){return React.DOM.h2({className:"page-header"},this.programName(),React.DOM.small({className:"pull-right"},this.collectionLength()," ",this.collectionName()))}});module.exports=ProgramHeader;
},{}],29:[function(require,module,exports){
"use strict";var RadioGroupButton=React.createClass({displayName:"RadioGroupButton",handleChange:function(e){for(var t=e.target.parentNode.parentNode,a=t.querySelectorAll(".btn"),s=t.querySelectorAll('input[type="radio"]'),r=0;r<a.length;r++){var o=a[r],l=s[r];o.className=o.className.replace("active",""),l.checked&&(o.className=o.className+" active")}},render:function(){return React.DOM.label({className:"btn btn-default btn-sm",htmlFor:this.props.htmlFor},React.DOM.input({type:"radio",id:this.props.id,value:this.props.inputValue,onChange:this.handleChange}),React.DOM.i({className:this.props.iconClass}),this.props.title)}});module.exports=RadioGroupButton;
},{}],30:[function(require,module,exports){
"use strict";var ReadOnlyFormGroup=React.createClass({displayName:"ReadOnlyFormGroup",render:function(){var e=this.props.label,l=this.props.value;return React.DOM.div({className:"form-group"},React.DOM.label({className:"control-label col-xs-12 col-sm-4"},e),React.DOM.span({className:"control-label col-xs-12 col-sm-8",style:{textAlign:"left"}},l))}});module.exports=ReadOnlyFormGroup;
},{}],31:[function(require,module,exports){
"use strict";var dateFormat=require("../globals").dateFormat,Spinner=require("./Spinner"),ParticipantGroupParticipant=require("./ParticipantGroupParticipant"),ParticipantGroupPanelFooter=require("./ParticipantGroupPanelFooter"),ReservedParticipantGroupPanel=React.createClass({displayName:"ReservedParticipantGroupPanel",propTypes:{data:React.PropTypes.object.isRequired,employerId:React.PropTypes.number},getInitialState:function(){return{sending:!1,puttingOnReview:!1}},componentWillMount:function(){this.props.onReviewExpiresOn=Date.today().add(3).days().toString(dateFormat)},handlePutOnReview:function(){this.setState({puttingOnReview:!0})},handleCancel:function(){this.setState({puttingOnReview:!1})},handleConfirm:function(){this.setState({sending:!0});var t=this.getDOMNode(),e={on_review_participant_group:{employer_id:this.props.employerId,expires_on:this.props.onReviewExpiresOn,reserved_participant_group_id:this.props.data.id}};$.ajax({url:"/on_review_participant_groups.json",type:"POST",data:e,success:function(){React.unmountComponentAtNode(t),$(t).remove()},error:function(){window.location=window.location}})},render:function(){var t,e,a=this.props.data.name,i=this.props.data.participants.length>1?"participants":"participant",n=this.props.data.participants.map(function(t){return ParticipantGroupParticipant({key:t.id,participant:t})});return this.state.puttingOnReview?(t=React.DOM.div({className:"btn-group"},React.DOM.button({className:"btn btn-success",onClick:this.handleConfirm,disabled:this.state.sending?"disabled":""},"Confirm"),React.DOM.button({className:"btn btn-default",onClick:this.handleCancel},"Cancel")),e=React.DOM.div(null,React.DOM.p({className:"panel-text"},"You will have until ",React.DOM.strong(null,this.props.onReviewExpiresOn)," to offer a position or decline the ",i,"."),React.DOM.p({className:"panel-text"},"If you take no action by ",React.DOM.strong(null,this.props.onReviewExpiresOn),", the ",i," will automatically be removed from your On Review list."))):t=React.DOM.button({className:"btn btn-success",onClick:this.handlePutOnReview},"Put on Review"),React.DOM.div({className:"panel panel-default participant-group-panel"},React.DOM.div({className:"list-group"},n),ParticipantGroupPanelFooter({name:a},t,e))}}),ReservedParticipantGroupPanels=React.createClass({displayName:"ReservedParticipantGroupPanels",propTypes:{source:React.PropTypes.string.isRequired},getInitialState:function(){return{groups:null}},componentDidMount:function(){$.get(this.props.source,function(t){this.isMounted()&&this.setState({groups:t.reserved_participant_groups})}.bind(this))},render:function(){if(this.isMounted()){var t=this.props.employerId;return React.DOM.div({id:"participant-group-panels"},this.state.groups.map(function(e){return ReservedParticipantGroupPanel({key:e.id,data:e,employerId:t})}))}return Spinner(null)}});module.exports=ReservedParticipantGroupPanels;
},{"../globals":36,"./ParticipantGroupPanelFooter":24,"./ParticipantGroupParticipant":25,"./Spinner":33}],32:[function(require,module,exports){
"use strict";var SearchFilter=React.createClass({displayName:"SearchFilter",propTypes:{title:React.PropTypes.string.isRequired,searchOn:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.array]).isRequired,actions:React.PropTypes.object.isRequired,inputCharacterMinimum:React.PropTypes.number,autoFocus:React.PropTypes.bool,placeholder:React.PropTypes.string},getDefaultProps:function(){return{inputCharacterMinimum:3,autoFocus:!0,placeholder:"Search"}},componentDidMount:function(){this.props.autoFocus&&this.refs.searchInput.getDOMNode().focus()},handleChange:function(e){var t=e.target.value;t.length>=this.props.inputCharacterMinimum?this.props.actions.search(this.props.title,t,this.props.searchOn):this.props.actions.resetSearch(this.props.title)},render:function(){return React.DOM.label({className:"list-group"},React.DOM.input({type:"search",ref:"searchInput",name:"search_"+this.props.title,onChange:this.handleChange,className:"list-group-item form-control",placeholder:this.props.placeholder}))}});module.exports=SearchFilter;
},{}],33:[function(require,module,exports){
"use strict";var Spinner=React.createClass({displayName:"Spinner",render:function(){return React.DOM.i({className:"fa fa-spinner fa-spin"})}});module.exports=Spinner;
},{}],34:[function(require,module,exports){
"use strict";var ValidatingFormGroup=React.createClass({displayName:"ValidatingFormGroup",mixins:[React.addons.LinkedStateMixin],propTypes:{validationState:React.PropTypes.object.isRequired,resourceId:React.PropTypes.number},stateName:function(t){return"childValid"+t.toString()},getInitialState:function(){var t={};return React.Children.forEach(this.props.children,function(e,i){t[this.stateName(i)]=!e.type.validates}.bind(this)),t},componentDidUpdate:function(){var t=!0;React.Children.forEach(this.props.children,function(e,i){t=t&&this.state[this.stateName(i)]}.bind(this)),t!==this.props.validationState.value&&this.props.validationState.requestChange(t)},render:function(){return React.DOM.div(null,React.Children.map(this.props.children,function(t,e){var i={validationState:this.linkState(this.stateName(e))};return this.props.resourceId&&(i.resourceId=this.props.resourceId),React.addons.cloneWithProps(t,i)}.bind(this)))}});module.exports=ValidatingFormGroup;
},{}],35:[function(require,module,exports){
"use strict";var calculateAgeAtArrival=require("../globals").calculateAgeAtArrival,YearCalculator=React.createClass({displayName:"YearCalculator",componentDidMount:function(){$(this.getDOMNode()).tooltip()},render:function(){return React.DOM.span(null,calculateAgeAtArrival(this.props.to,this.props.from))}});module.exports=YearCalculator;
},{"../globals":36}],36:[function(require,module,exports){
"use strict";module.exports={dateFormat:"MM/dd/yyyy",parseIntBase10:function(e){return parseInt(e,10)},calculateAgeAtArrival:function(e,r){return new TimePeriod(Date.parse(e),Date.parse(r)).years}};
},{}],37:[function(require,module,exports){
"use strict";var actions=require("./actions"),Spinner=require("./components/Spinner");module.exports={SetUrlsMixin:{propTypes:{urls:React.PropTypes.object.isRequired},componentDidMount:function(){actions.setUrls(this.props.urls)}},ValidatingInputMixin:{statics:{validates:!0},propTypes:{validationState:React.PropTypes.object.isRequired},getInitialState:function(){return{value:null}},handleChange:function(e){var t=this.validate(e.target.value);this.setState({value:e.target.value}),this.props.validationState.requestChange(t)}},RenderLoadedMixin:function(){var e=arguments;if(0===e.length)throw new Error("RenderLoadedMixin takes at least one string argument.");return{render:function(){for(var t=0;t<e.length;t++)if(!this.state[e[t]])return Spinner(null);return this.renderLoaded()}}}};
},{"./actions":2,"./components/Spinner":33}],38:[function(require,module,exports){
"use strict";var AgeAtArrivalActions=require("../actions").AgeAtArrivalActions,AgeAtArrivalStore=Reflux.createStore({listenables:AgeAtArrivalActions,permission:!0,init:function(){this.data=[{id:"21_and_over",name:"21 and Over"},{id:"under_21",name:"Under 21"}]}});module.exports=AgeAtArrivalStore;
},{"../actions":2}],39:[function(require,module,exports){
"use strict";var actions=require("../actions"),CountryStore=Reflux.createStore({listenables:actions.CountryActions,permission:!1,init:function(){this.listenTo(actions.loadFromInMatchingParticipantGroups,this.onLoadFromInMatchingParticipantGroups)},onLoadFromInMatchingParticipantGroups:function(t){this.permission=!0,this.data=t.mapAttribute("participants").flatten().mapAttribute("country_name").flatten().sort().uniq().map(function(t){return{id:t,name:t}}),this.trigger(this.data)}});module.exports=CountryStore;
},{"../actions":2}],40:[function(require,module,exports){
"use strict";var actions=require("../actions"),EmployerStore=Reflux.createStore({resourceName:"employers",listenables:actions.EmployerActions,init:function(){this.listenTo(actions.loadFromJobOfferGroups,this.onLoadFromJobOfferGroups),this.listenTo(actions.loadFromOfferedParticipantGroups,this.onLoadFromOfferedParticipantGroups),this.listenTo(actions.loadFromJobOfferParticipantAgreements,this.onLoadFromJobOfferParticipantAgreements)},initPostAjaxLoad:function(){this.trigger(this.data)},onLoadFromJobOfferGroups:function(o){actions.EmployerActions.ajaxLoad(o.mapAttribute("employer_id"),actions.StaffActions.loadFromEmployer)},onLoadFromOfferedParticipantGroups:function(o){actions.EmployerActions.ajaxLoad(o.mapAttribute("employer_id"),actions.StaffActions.loadFromEmployer)},onLoadFromJobOfferParticipantAgreements:function(o){actions.EmployerActions.ajaxLoad(o.mapAttribute("job_offer").mapAttribute("employer_id"),actions.StaffActions.loadFromEmployer)},onUpdateOnReviewCount:function(o,t,r){this.data=this.data.map(function(e){return e.id===o&&(e.enrollments=e.enrollments.map(function(o){return o.id===t&&(o.on_review_count+=r),o})),e}),this.trigger(this.data)}});module.exports=EmployerStore;
},{"../actions":2}],41:[function(require,module,exports){
"use strict";var EnglishLevelActions=require("../actions").EnglishLevelActions,EnglishLevelStore=Reflux.createStore({listenables:EnglishLevelActions,permission:!0,init:function(){this.data=[{id:10,name:"10"},{id:9,name:"9"},{id:8,name:"8"},{id:7,name:"7"},{id:6,name:"6"},{id:5,name:"5"}]}});module.exports=EnglishLevelStore;
},{"../actions":2}],42:[function(require,module,exports){
"use strict";var GenderActions=require("../actions").GenderActions,GenderStore=Reflux.createStore({listenables:GenderActions,permission:!0,init:function(){this.data=[{id:"Female",name:"Female"},{id:"Male",name:"Male"}]}});module.exports=GenderStore;
},{"../actions":2}],43:[function(require,module,exports){
"use strict";var actions=require("../actions"),globals=require("../globals"),parseIntBase10=globals.parseIntBase10,calculateAgeAtArrival=globals.calculateAgeAtArrival,InMatchingParticipantGroupStore=Reflux.createStore({resourceName:"inMatchingParticipantGroups",listenables:actions.InMatchingParticipantGroupActions,filterIds:{},initPostAjaxLoad:function(){this.data=this.data.map(function(t){return t.participant_names=t.participants.mapAttribute("name").join(","),t.participant_start_dates=t.participants.map(function(t){return Date.parse(t.arrival_date).add(2).days()}),t.participant_finish_dates=t.participants.map(function(t){return Date.parse(t.departure_date).add(2).days()}),t}),this.initFilters(),this.trigger(this.data)},initFilters:function(){this.listenTo(actions.AgeAtArrivalActions.filterByIds,this.filterAgeAtArrival),this.listenTo(actions.ParticipantGroupNameActions.filterByIds,this.filterParticipantGroupNames),this.listenTo(actions.GenderActions.filterByIds,this.filterGenders),this.listenTo(actions.EnglishLevelActions.filterByIds,this.filterEnglishLevels),this.listenTo(actions.PositionActions.filterByIds,this.filterPositions),this.listenTo(actions.CountryActions.filterByIds,this.filterCountries),this.trigger(this.data)},filterAgeAtArrival:function(t){var i="ageAtArrivals";if(2===t.length||0===t.length)this.filterIds[i]=null;else{var e;switch(t[0]){case"21_and_over":e=function(t,i){return t||calculateAgeAtArrival(i.arrival_date,i.date_of_birth)>=21};break;case"under_21":e=function(t,i){return t||calculateAgeAtArrival(i.arrival_date,i.date_of_birth)<21}}this.filterIds[i]=this.data.reduce(function(t,i){return i.participants.reduce(e,!1)&&t.push(i.id),t},[])}this.emitFilteredData()},filterParticipantGroupNames:function(t){this.genericIdFilter("participantGroupNames",t,function(i){return t.indexOf(i.name)>=0})},filterGenders:function(t){this.genericIdFilter("genders",t,function(i){return t.intersects(i.participants.mapAttribute("gender"))})},filterEnglishLevels:function(t){var i=t.map(parseIntBase10);this.genericIdFilter("englishLevels",i,function(t){return i.intersects(t.participants.mapAttribute("english_level"))})},filterPositions:function(t){var i=t.map(parseIntBase10);this.genericIdFilter("positions",i,function(t){return i.intersects(t.participants.mapAttribute("position_ids").flatten())})},filterCountries:function(t){this.genericIdFilter("countries",t,function(i){return t.intersects(i.participants.mapAttribute("country_name"))})},onTogglePreviousParticipation:function(t){var i="previousParticipation";this.filterIds[i]=t?this.data.reduce(function(t,i){var e=i.participants.reduce(function(t,i){return t||i.has_had_j1},!1);return e&&t.push(i.id),t},[]):null,this.emitFilteredData()},onToggleInternationalDriversLicense:function(t){var i="internationalDriversLicense";this.filterIds[i]=t?this.data.reduce(function(t,i){var e=i.participants.reduce(function(t,i){return t||i.has_international_drivers_license},!1);return e&&t.push(i.id),t},[]):null,this.emitFilteredData()},onOffer:function(t,i,e,r,n){$.ajax({url:"/on_review_participant_groups.json",type:"POST",data:{on_review_participant_group:{in_matching_participant_group_id:t.id,employer_id:i.id,expires_on:r}},dataType:"json",success:function(t){var r=t.on_review_participant_group.participants.length;actions.EmployerActions.updateOnReviewCount(i.id,e.id,r)}.bind(this),complete:n})}});module.exports=InMatchingParticipantGroupStore;
},{"../actions":2,"../globals":36}],44:[function(require,module,exports){
"use strict";var actions=require("../actions"),parseIntBase10=require("../globals").parseIntBase10,EmployerStore=require("./EmployerStore"),JobOfferGroupStore=Reflux.createStore({resourceName:"jobOfferGroups",listenables:actions.JobOfferGroupActions,filterIds:{},initPostAjaxLoad:function(){this.data=this.data.map(function(e){return e.participant_names=e.job_offers.map(function(e){return e.participant.name}).join(","),e}),this.listenTo(actions.EmployerActions.filterByIds,this.filterEmployers),this.listenTo(actions.StaffActions.filterByIds,this.filterStaffs),this.listenTo(actions.JobOfferSignedActions.filterByIds,this.filterJobOfferSigneds),this.trigger(this.data)},filterEmployers:function(e){var t=e.map(parseIntBase10);this.genericIdFilter("employers",t,function(e){return t.indexOf(e.employer_id)>=0})},filterStaffs:function(e){var t=e.map(parseIntBase10);this.genericIdFilter("staffs",t,function(e){var r=EmployerStore.findById(e.employer_id);return r&&t.indexOf(r.staff_id)>=0})},filterJobOfferSigneds:function(e){var t="jobOfferSigneds";if(2===e.length||0===e.length)this.filterIds[t]=null;else switch(e[0]){case"All Signed":this.filterIds[t]=this.data.reduce(function(e,t){var r=t.job_offers.reduce(function(e,t){return e&&null!==t.participant_agreement},!0);return r&&e.push(t.id),e},[]);break;case"Any Unsigned":this.filterIds[t]=this.data.reduce(function(e,t){var r=t.job_offers.reduce(function(e,t){return e||null===t.participant_agreement},!1);return r&&e.push(t.id),e},[])}this.emitFilteredData()},onCreate:function(e,t){$.ajax({url:"/job_offer_groups.json",type:"POST",dataType:"json",data:{job_offer_group:e},complete:t})},onDestroy:function(e){$.ajax({url:"/job_offer_groups/"+parseInt(e)+".json",type:"POST",dataType:"json",data:{_method:"DELETE"},success:function(){this.data=this.data.filter(function(t){return t.id!==e}),this.emitFilteredData()}.bind(this),error:function(){window.location=window.location}})}});module.exports=JobOfferGroupStore;
},{"../actions":2,"../globals":36,"./EmployerStore":40}],45:[function(require,module,exports){
"use strict";var JobOfferParticipantAgreementActions=require("../actions").JobOfferParticipantAgreementActions,JobOfferParticipantAgreementStore=Reflux.createStore({resourceName:"jobOfferParticipantAgreements",listenables:JobOfferParticipantAgreementActions,filterIds:{},toggleNotInFileMaker:function(e){var t="notInFileMaker";this.filterIds[t]=e?this.data.reduce(function(e,t){return t.job_offer.file_maker_reference||e.push(t.id),e},[]):null,this.emitFilteredData()}});module.exports=JobOfferParticipantAgreementStore;
},{"../actions":2}],46:[function(require,module,exports){
"use strict";var JobOfferSignedActions=require("../actions").JobOfferSignedActions,JobOfferSignedStore=Reflux.createStore({listenables:JobOfferSignedActions,permission:!0,init:function(){this.data=[{id:"All Signed",name:"All Signed"},{id:"Any Unsigned",name:"Any Unsigned"}]}});module.exports=JobOfferSignedStore;
},{"../actions":2}],47:[function(require,module,exports){
"use strict";var actions=require("../actions"),parseIntBase10=require("../globals").parseIntBase10,EmployerStore=require("./EmployerStore"),OfferedParticipantGroupStore=Reflux.createStore({resourceName:"offeredParticipantGroups",listenables:actions.OfferedParticipantGroupActions,filterIds:{},initPostAjaxLoad:function(){this.data=this.data.map(function(t){return t.participant_names=t.participants.mapAttribute("name").join(","),t.participant_emails=t.participants.mapAttribute("email").join(","),t.participant_uuids=t.participants.mapAttribute("uuid").join(","),t}),this.listenTo(actions.EmployerActions.filterByIds,this.filterEmployers),this.listenTo(actions.StaffActions.filterByIds,this.filterStaffs),this.trigger(this.data)},onReject:function(t,i){$.ajax({url:"/offered_participant_groups/"+t,type:"POST",data:{_method:"DELETE"},success:function(e){this.data=this.data.filter(function(i){return i.id!==t}),this.emitFilteredData(),"function"==typeof i&&i(e)}.bind(this),error:function(){window.location=window.location}})},filterPrograms:function(t){var i=t.map(parseIntBase10);this.genericIdFilter("programs",i,function(t){return i.indexOf(t.participants[0].program_id)>=0})},filterStaffs:function(t){var i=t.map(parseIntBase10);this.genericIdFilter("staffs",i,function(t){var e=EmployerStore.findById(t.employer_id);return e&&i.indexOf(e.staff_id)>=0})},filterEmployers:function(t){var i=t.map(parseIntBase10);this.genericIdFilter("employers",i,function(t){return i.indexOf(t.employer_id)>=0})}});module.exports=OfferedParticipantGroupStore;
},{"../actions":2,"../globals":36,"./EmployerStore":40}],48:[function(require,module,exports){
"use strict";var actions=require("../actions"),ParticipantGroupNameStore=Reflux.createStore({listenables:actions.ParticipantGroupNameActions,permission:!1,init:function(){this.listenTo(actions.loadFromInMatchingParticipantGroups,this.onLoadFromInMatchingParticipantGroups)},onLoadFromInMatchingParticipantGroups:function(t){this.permission=!0,this.data=t.map(function(t){return t.name}).sort().uniq().map(function(t){return{id:t,name:t}}),this.trigger(this.data)}});module.exports=ParticipantGroupNameStore;
},{"../actions":2}],49:[function(require,module,exports){
"use strict";var PositionActions=require("../actions").PositionActions,PositionStore=Reflux.createStore({resourceName:"positions",listenables:PositionActions});module.exports=PositionStore;
},{"../actions":2}],50:[function(require,module,exports){
"use strict";var actions=require("../actions"),ProgramStore=Reflux.createStore({resourceName:"programs",listenables:actions.ProgramActions,applicableIds:null,init:function(){this.listenTo(actions.loadFromJobOfferGroups,this.onLoadFromJobOfferGroups),this.listenTo(actions.loadFromOfferedParticipantGroups,this.onLoadFromOfferedParticipantGroups),this.listenTo(actions.loadFromJobOfferParticipantAgreements,this.onLoadFromJobOfferParticipantAgreements)},initPostAjaxLoad:function(){null!==this.applicableIds&&(this.data=this.data.filter(function(o){return this.applicableIds.indexOf(o.id)>=0},this)),this.trigger(this.data)},onLoadFromJobOfferGroups:function(o){this.applicableIds=o.map(function(o){return o.job_offers[0].participant.program_id}).uniq(),actions.ProgramActions.ajaxLoad()},onLoadFromOfferedParticipantGroups:function(o){this.applicableIds=o.map(function(o){return o.participants[0].program_id}).uniq(),actions.ProgramActions.ajaxLoad()},onLoadFromJobOfferParticipantAgreements:function(o){this.applicableIds=o.map(function(o){return o.job_offer.participant.program_id}).uniq(),actions.ProgramActions.ajaxLoad()}});module.exports=ProgramStore;
},{"../actions":2}],51:[function(require,module,exports){
"use strict";var StaffActions=require("../actions").StaffActions,StaffStore=Reflux.createStore({resourceName:"staffs",listenables:StaffActions,onLoadFromEmployer:function(t){StaffActions.ajaxLoad(t.mapAttribute("staff_id"))}});module.exports=StaffStore;
},{"../actions":2}]},{},[1])


//# sourceMappingURL=../maps/interexchange-components.min.js.map