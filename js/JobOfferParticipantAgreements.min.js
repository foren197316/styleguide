webpackJsonp([5],{0:function(e,n,t){e.exports=t(9)},9:function(e,n,t){"use strict";t(11);var r=t(23),a=t(13),o=t(21);r.render(r.createElement(o,{exportUrl:a.dataset["export"]}),a)},21:function(e,n,t){"use strict";var r=t(23),a=t(74),o=t(34),i=t(70),s=r.createFactory(t(71)),c=r.createFactory(t(61)),l=r.createFactory(t(62)),u=r.createFactory(t(72)),p=r.createFactory(t(66)),d=t(44),_=r.DOM.div,m=r.createClass({displayName:"JobOfferParticipantAgreementsIndex",mixins:[a.connect(i,"jobOfferParticipantAgreements")],propTypes:{exportUrl:r.PropTypes.string.isRequired},render:function(){var e=this.state.jobOfferParticipantAgreements?this.state.jobOfferParticipantAgreements.map(function(e){return e.job_offer.id}):[];return _({className:"row"},_({className:"col-md-3"},c({title:"Search",searchOn:[["job_offer","participant","name"],["job_offer","participant","email"],["job_offer","participant","uuid"]],actions:o.JobOfferParticipantAgreementActions}),l({title:"Program",store:d,actions:o.ProgramActions}),u({title:"FileMaker",label:"Not in FileMaker",action:i.toggleNotInFileMaker}),p({url:this.props.exportUrl,ids:e})),_({className:"col-md-9"},s({jobOfferParticipantAgreements:this.state.jobOfferParticipantAgreements})))}});e.exports=m},28:function(e,n,t){"use strict";var r=t(23),a=t(53),o=a.dateFormatMDY,i=a.dateFormatYMD,s=t(79),c=t(80),l=t(78),u=r.createClass({displayName:"ParticipantGroupParticipant",propTypes:{participant:r.PropTypes.object.isRequired},render:function(){var e=this.props.participant,n=r.Children.count(this.props.children)>0?r.DOM.hr({}):null;return r.DOM.div({className:"list-group-item list-group-item-participant","data-participant-name":e.name},r.DOM.div({className:"media"},r.DOM.img({className:"media-object img-circle img-thumbnail pull-left",src:e.photo_url+"/convert?h=100&w=100&fit=crop",alt:e.name}),r.DOM.div({className:"media-body"},r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-12"},r.DOM.h4({className:"media-heading"},r.createElement(s,{name:e.name,href:e.href})))),r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-12 col-md-6"},r.DOM.strong({},e.country_name),r.DOM.br({}),r.DOM.strong({},r.createElement(c,{from:e.date_of_birth,to:e.arrival_date})),r.DOM.strong({style:{paddingLeft:"5px"}},e.gender))),r.DOM.hr({}),r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-12 col-md-4 col-md-offset-4"},r.DOM.div({className:"row text-right"},r.DOM.div({className:"col-xs-6 col-md-10"},r.DOM.strong({},"English ",r.DOM.span({className:"hidden-xs"},"Level")," ")),r.DOM.div({className:"col-xs-6 col-md-2"},r.DOM.span({},e.english_level)))),r.DOM.div({className:"col-xs-12 col-md-4"},r.DOM.div({className:"row text-right"},r.DOM.div({className:"col-xs-6 col-md-5 col-lg-7"},r.DOM.strong({},"Availability")),r.DOM.div({className:"col-xs-6 col-md-7 col-lg-5"},r.DOM.span({},l(e.arrival_date,i).add(2,"days").format(o)),r.DOM.br({}),r.DOM.span({},l(e.departure_date,i).format(o)))))),n,r.Children.map(this.props.children,function(e){return r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-12"},e))}))))}});e.exports=u},29:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"ParticipantGroupPanelFooterName",propTypes:{name:r.PropTypes.string.isRequired},render:function(){return r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-6 col-sm-6"},r.DOM.div({className:"panel-title pull-left",style:{whiteSpace:"nowrap"}},this.props.name)),r.DOM.div({className:"col-xs-6 col-sm-6"},r.DOM.div({className:"pull-right"},this.props.children)))}}),o=r.createClass({displayName:"ParticipantGroupPanelFooter",propTypes:{name:r.PropTypes.string.isRequired},render:function(){var e=this.props.name,n=r.Children.map(this.props.children,function(n,t){return null!=n?0===t?r.createElement(a,{name:e},n):r.DOM.div({className:"row"},r.DOM.div({className:"col-xs-12 text-right"},r.DOM.hr({}),n)):void 0})||r.createElement(a,{name:e});return r.DOM.div({className:"panel-footer clearfix"},n)}});e.exports=o},30:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"Spinner",render:function(){return r.DOM.i({className:"fa fa-spinner fa-spin"})}});e.exports=a},33:function(e,n,t){"use strict";var r=t(23),a=t(30),o=t(52).getQuery;e.exports={ValidateNumber:function(e){return e&&!/^\d+(\.\d+)?$/.test(e)?"error":void 0},ValidateMoney:function(e){return e&&!/^\d+([\.,]\d{1,2})?$/.test(e)?"error":void 0},ValidatingInputMixin:{statics:{validates:!0},propTypes:{validationState:r.PropTypes.object.isRequired},getInitialState:function(){return{value:null}},handleChange:function(e){var n=this.validate(e.target.value);this.setState({value:e.target.value}),this.props.validationState.requestChange(n)}},RenderLoadedMixin:function(){for(var e=arguments.length,n=Array(e),t=0;e>t;t++)n[t]=arguments[t];if(0===n.length)throw new Error("RenderLoadedMixin takes at least one string argument.");return{render:function(){for(var e=0;e<n.length;e++)if(!this.state[n[e]])return r.createElement(a);return this.renderLoaded()}}},UrlQueryMixin:{regExEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},getValueFromUrl:function(e){var n=o();if(null!=n){for(var t,r=[],a=new RegExp("q\\["+this.regExEscape(e)+"\\](\\[\\])?=([^&]+)","g"),i=!1;null!=(t=a.exec(n));){if(i=!0,null==t[1])return t[2];r.push(t[2])}return i?r:null}return null}}}},34:function(e,n,t){"use strict";var r=t(74),a=["setData","ajaxLoad","filterByIds","forceTrigger","removeByIds","setSingleton","ajaxLoadSingleton"],o=["search","resetSearch","dateFilter","ajaxSearch"];e.exports={OfferedParticipantGroupActions:r.createActions(a.concat(o).concat(["reject"])),InMatchingParticipantGroupActions:r.createActions(a.concat(o).concat(["offer","toggleInternationalDriversLicense","togglePreviousParticipation"])),OnReviewParticipantGroupActions:r.createActions(a.concat(o)),JobListingActions:r.createActions(a.concat(o)),JobOfferGroupActions:r.createActions(a.concat(o)),ParticipantGroupNameActions:r.createActions(a.concat(["setNames"])),CountryActions:r.createActions(a.concat(["setCountries"])),StaffActions:r.createActions(a.concat(["loadFromEmployer"])),ProgramActions:r.createActions(a.concat(["loadFromEmployer"])),EmployerActions:r.createActions(a.concat(["updateOnReviewCount"])),JobOfferParticipantAgreementActions:r.createActions(a.concat(o)),JobOfferSignedActions:r.createActions(a),EnglishLevelActions:r.createActions(a),AgeAtArrivalActions:r.createActions(a),GenderActions:r.createActions(a),PositionActions:r.createActions(a),loadFromJobOfferGroups:r.createAction("loadFromJobOfferGroups"),loadFromOfferedParticipantGroups:r.createAction("loadFromOfferedParticipantGroups"),loadFromJobOfferParticipantAgreements:r.createAction("loadFromJobOfferParticipantAgreements"),loadFromJobListings:r.createAction("loadFromJobListings"),loadFromOnReviewParticipantGroups:r.createAction("loadFromOnReviewParticipantGroups")}},37:function(e,n,t){"use strict";var r=t(74),a=t(34),o=a.EmployerActions,i=a.StaffActions,s=a.loadFromOfferedParticipantGroups,c=a.loadFromJobOfferParticipantAgreements,l=a.loadFromJobListings,u=a.loadFromOnReviewParticipantGroups,p=a.loadFromJobOfferGroups,d=t(82),_=r.createStore({resourceName:"employers",listenables:o,init:function(){this.listenTo(s,this.onLoadFromOfferedParticipantGroups),this.listenTo(c,this.onLoadFromJobOfferParticipantAgreements),this.listenTo(l,this.extractFromData),this.listenTo(u,this.extractFromData),this.listenTo(p,this.extractFromData)},onLoadFromOfferedParticipantGroups:function(e){var n=e.offered_participant_groups;o.ajaxLoad(n.mapAttribute("employer_id"),i.loadFromEmployer)},onLoadFromJobOfferParticipantAgreements:function(e){var n=e.job_offer_participant_agreements;o.ajaxLoad(n.mapAttribute("job_offer").mapAttribute("employer_id"),i.loadFromEmployer)},extractFromData:function(e){this.permission=!0,this.data=e.employers.sort(d),this.trigger(this.data)},onUpdateOnReviewCount:function(e,n,t){var r=function(e){return e.id===n&&(e.on_review_count+=t),e};this.singleton?this.data.enrollments=this.data.enrollments.map(r):this.data=this.data.map(function(n){return n.id===e&&(n.enrollments=n.enrollments.map(r)),n}),this.trigger(this.data)},set:function(e){null!=e&&(this.permission=!0,this.mergeData(e),this.trigger(this.data))},mergeData:function(e){var n=this;null==this.data?this.data=e:Object.keys(e).forEach(function(t){n.data[t]=e[t]})}});e.exports=_},43:function(e,n,t){"use strict";var r=t(74),a=t(34),o=a.PositionActions,i=r.createStore({resourceName:"positions",listenables:o});e.exports=i},44:function(e,n,t){"use strict";var r=t(74),a=t(34),o=a.ProgramActions,i=a.loadFromJobOfferGroups,s=a.loadFromOfferedParticipantGroups,c=a.loadFromJobOfferParticipantAgreements,l=a.loadFromOnReviewParticipantGroups,u=t(82),p=r.createStore({resourceName:"programs",listenables:o,applicableIds:null,init:function(){this.listenTo(i,this.extractProgramsFromResponse),this.listenTo(s,this.onLoadFromOfferedParticipantGroups),this.listenTo(c,this.onLoadFromJobOfferParticipantAgreements),this.listenTo(l,this.extractProgramsFromResponse)},initPostAjaxLoad:function(){var e=this;null!=this.applicableIds&&(this.data=this.data.filter(function(n){return e.applicableIds.indexOf(n.id)>=0})),this.trigger(this.data)},extractProgramsFromResponse:function(e){this.set(e.programs)},onLoadFromOfferedParticipantGroups:function(e){var n=e.offered_participant_groups;this.applicableIds=n.map(function(e){return e.participants[0].program_id}).uniq(),o.ajaxLoad()},onLoadFromJobOfferParticipantAgreements:function(e){var n=e.job_offer_participant_agreements;this.applicableIds=n.map(function(e){return e.job_offer.participant.program_id}).uniq(),o.ajaxLoad()},set:function(e){this.permission=!0,this.data=e.sort(u),this.trigger(this.data)}});e.exports=p},52:function(e,n,t){(function(n){"use strict";var r=t(25),a=/\bpage=(\d+)\b/i,o=function(){var e,t=n.location.hash;if(t.length>1)try{e=r.urlsafeDecode64(t.slice(1))}catch(a){}return e};e.exports={getQuery:o,getCurrentPage:function(){var e;return null!=(e=a.exec(o()))?parseInt(e[1])||1:1}}}).call(n,function(){return this}())},58:function(e,n,t){"use strict";var r=t(74),a=t(34),o=a.StaffActions,i=a.loadFromJobOfferGroups,s=a.loadFromOnReviewParticipantGroups,c=t(82),l=r.createStore({resourceName:"staffs",listenables:o,init:function(){this.listenTo(i,this.extractStaffsFromData),this.listenTo(s,this.extractStaffsFromData)},extractStaffsFromData:function(e){this.set(e.staffs)},onLoadFromEmployer:function(e){var n=e.employers;o.ajaxLoad(n.mapAttribute("staff_id"))},set:function(e){this.permission=!0,this.data=e.sort(c),this.trigger(this.data)}});e.exports=l},61:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"SearchFilter",propTypes:{title:r.PropTypes.string.isRequired,searchOn:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.array]).isRequired,actions:r.PropTypes.object.isRequired,inputCharacterMinimum:r.PropTypes.number,autoFocus:r.PropTypes.bool,placeholder:r.PropTypes.string},getDefaultProps:function(){return{inputCharacterMinimum:3,autoFocus:!0,placeholder:"Search"}},componentDidMount:function(){this.props.autoFocus&&this.refs.searchInput.getDOMNode().focus()},handleChange:function(e){var n=e.target.value;n.length>=this.props.inputCharacterMinimum?this.props.actions.search(this.props.title,n,this.props.searchOn):this.props.actions.resetSearch(this.props.title)},render:function(){return r.DOM.label({className:"list-group"},r.DOM.input({type:"search",ref:"searchInput",name:"search_"+this.props.title,onChange:this.handleChange,className:"list-group-item form-control",placeholder:this.props.placeholder}))}});e.exports=a},62:function(e,n,t){"use strict";var r=t(23),a=t(24),o=r.createClass({displayName:"CheckBoxFilter",propTypes:{title:r.PropTypes.string.isRequired,store:r.PropTypes.object.isRequired,actions:r.PropTypes.object.isRequired},getInitialState:function(){return{isLoaded:!!this.props.store.data}},componentDidMount:function(){this.state.isLoaded||(this.stopListener=this.props.store.listen(function(){this.stopListener(),this.setState({isLoaded:!0})}.bind(this)))},onChange:function(){var e=a.map(a(this.getDOMNode()).find('input[type="checkbox"]:checked'),function(e){return e.getAttribute("value")});this.props.actions.filterByIds(e)},render:function(){return this.props.store.permission&&this.props.store.data.length>0&&this.state.isLoaded?r.DOM.div({className:"panel panel-default"},r.DOM.div({className:"panel-heading"},this.props.title),r.DOM.div({className:"list-group list-group-scrollable"},this.props.store.data.map(function(e){return r.DOM.label({key:this.props.title+"_checkbox_"+e.id,className:"list-group-item"},r.DOM.input({type:"checkbox",name:this.props.title.toLowerCase()+"["+e.id+"]",value:e.id,onChange:this.onChange}),r.DOM.span({className:"title"},e.name))}.bind(this)))):null}});e.exports=o},66:function(e,n,t){"use strict";var r=t(23),a=t(27),o=r.DOM,i=o.input,s=o.form,c=o.button,l=o.i,u=r.createClass({displayName:"HiddenIdInput",propTypes:{id:r.PropTypes.number.isRequired},render:function(){return i({type:"hidden",name:"ids[]",value:this.props.id})}});e.exports=r.createClass({displayName:"ExportButton",propTypes:{ids:r.PropTypes.array.isRequired,url:r.PropTypes.string.isRequired},render:function(){return s({action:this.props.url,method:"POST"},i({type:"hidden",name:"authenticity_token",value:a}),c({className:"btn btn-block btn-default",type:"submit",style:{marginBottom:"15px"}},l({className:"fa fa-download"})," Export to CSV"),this.props.ids.map(function(e){return r.createElement(u,{id:e,key:"hidden_input_"+e})}))}})},70:function(e,n,t){"use strict";var r=t(74),a=t(34).JobOfferParticipantAgreementActions,o=r.createStore({resourceName:"jobOfferParticipantAgreements",listenables:a,filterIds:{},toggleNotInFileMaker:function(e){var n="notInFileMaker";this.filterIds[n]=e?this.data.reduce(function(e,n){return n.job_offer.file_maker_reference||e.push(n.id),e},[]):null,this.emitFilteredData()}});e.exports=o},71:function(e,n,t){"use strict";var r=t(23),a=t(74),o=t(34),i=t(33),s=t(44),c=t(43),l=t(37),u=t(58),p=t(91),d=r.createFactory(t(92)),_=r.createClass({displayName:"JobOfferParticipantAgreementsPanel",mixins:[a.connect(s,"programs"),a.connect(c,"positions"),a.connect(l,"employers"),a.connect(u,"staffs"),i.RenderLoadedMixin("programs","positions","employers","staffs")],propTypes:{jobOfferParticipantAgreements:r.PropTypes.array.isRequired},componentDidMount:function(){o.JobOfferParticipantAgreementActions.ajaxLoad(o.loadFromJobOfferParticipantAgreements),o.PositionActions.ajaxLoad()},renderLoaded:function(){var e=this;return r.DOM.div({id:"participant-group-panels"},this.state.programs.map(function(n){var t=e.props.jobOfferParticipantAgreements.filter(function(e){return e.job_offer.participant.program_id===n.id});return t.length>0?r.DOM.div({key:"program_"+n.id},r.createElement(p,{program:n,collectionName:"Participant Agreement",collection:t}),t.map(function(n){var t=n.job_offer,r=e.state.positions.findById(t.position_id);return d({jobOfferParticipantAgreement:n,jobOffer:t,position:r,key:n.id})})):void 0}))}});e.exports=_},72:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"BooleanFilter",propTypes:{title:r.PropTypes.string.isRequired,label:r.PropTypes.string.isRequired,action:r.PropTypes.func.isRequired},getInitialState:function(){return{isChecked:!1}},onChange:function(){var e=!this.state.isChecked;this.setState({isChecked:e}),this.props.action(e)},render:function(){return r.DOM.div({className:"panel panel-default"},r.DOM.div({className:"panel-heading"},this.props.title),r.DOM.div({className:"list-group list-group-scrollable"},r.DOM.label({className:"list-group-item"},r.DOM.input({ref:"checkbox",type:"checkbox",name:this.props.title.toLowerCase(),onChange:this.onChange}),r.DOM.span({className:"title"},this.props.label))))}});e.exports=a},79:function(e,n,t){"use strict";var r=t(23),a=r.DOM,o=a.span,i=a.a,s=r.createClass({displayName:"LinkToIf",propTypes:{name:r.PropTypes.string.isRequired,href:r.PropTypes.string},render:function(){return this.props.href?i({href:this.props.href},this.props.name):r.Children.count(this.props.children)>0?o({},this.props.children):o({},this.props.name)}});e.exports=s},80:function(e,n,t){"use strict";var r=t(23),a=t(53).calculateAgeAtArrival,o=t(24),i=r.createClass({displayName:"YearCalculator",propTypes:{to:r.PropTypes.string.isRequired,from:r.PropTypes.string.isRequired},componentDidMount:function(){o(this.getDOMNode()).tooltip()},render:function(){return r.DOM.span({},a(this.props.to,this.props.from))}});e.exports=i},81:function(e,n,t){"use strict";var r=t(23);e.exports=r.createClass({displayName:"ParticipantGroupHeader",render:function(){return r.DOM.div({className:"panel-heading"},r.DOM.h1({className:"panel-title"},this.props.children))}})},82:function(e){"use strict";e.exports=function(e,n){return e.name>n.name?1:e.name<n.name?-1:0}},88:function(e,n,t){"use strict";var r=t(23),a=r.createFactory(t(79)),o=r.createFactory(t(81)),i=r.DOM.span,s=r.createClass({displayName:"EmployerHeader",propTypes:{employer:r.PropTypes.object.isRequired,staff:r.PropTypes.object},render:function(){var e=this.props,n=e.employer,t=e.staff;return t=t||{},o({},i({className:"pull-right text-muted"},t.name),a({name:n.name,href:n.url}))}});e.exports=s},90:function(e,n,t){"use strict";var r=t(23),a=t(53),o=a.dateFormatMDY,i=a.dateFormatYMD,s=r.createFactory(t(114)),c=t(28),l=t(78),u=r.DOM,p=u.div,d=u.a,_=r.createClass({displayName:"JobOffer",propTypes:{jobOffer:r.PropTypes.object.isRequired,jobOfferParticipantAgreement:r.PropTypes.object,position:r.PropTypes.object.isRequired},render:function(){var e=null,n=this.props.position,t=this.props.jobOfferParticipantAgreement||this.props.jobOffer.participant_agreement,a=null,u=null,_=this.props.jobOffer.href?d({href:this.props.jobOffer.href},"View"):null;return"yes"===this.props.jobOffer.overtime.toLowerCase()&&(e=s({label:"Overtime rate per hour",value:"$"+parseFloat(this.props.jobOffer.overtime_rate).toFixed(2)})),null!=t&&(a=s({label:"Signed by",value:""+t.full_name+" on  "+l(t.created_at,i).format(o)})),null!=this.props.jobOffer.file_maker_reference&&(u=s({label:"Imported on",value:l(this.props.jobOffer.file_maker_reference.created_at,i).format(o)})),r.createElement(c,{participant:this.props.jobOffer.participant},p({className:"form form-horizontal"},s({label:"Position",value:n.name}),s({label:"Wage per hour",value:"$"+parseFloat(this.props.jobOffer.wage).toFixed(2)}),s({label:"Tipped?",value:this.props.jobOffer.tipped?"Yes":"No"}),s({label:"Hours per week",value:this.props.jobOffer.hours}),s({label:"Overtime?",value:this.props.jobOffer.overtime.capitaliseWord()}),e,a,u,s({label:"",value:_})))}});e.exports=_},91:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"ProgramHeader",propTypes:{program:r.PropTypes.object.isRequired,collectionName:r.PropTypes.string.isRequired,collection:r.PropTypes.array.isRequired},programName:function(){return this.props.program.name},collectionName:function(){return this.props.collectionName.pluralize(this.collectionLength())},collectionLength:function(){return this.props.collection.length},render:function(){return r.DOM.h2({className:"page-header"},this.programName(),r.DOM.small({className:"pull-right"},this.collectionLength()," ",this.collectionName()))}});e.exports=a},92:function(e,n,t){"use strict";var r=t(23),a=t(37),o=t(58),i=r.createFactory(t(88)),s=r.createFactory(t(90)),c=r.createFactory(t(29)),l=t(78),u=r.DOM.div,p=r.createClass({displayName:"JobOfferParticipantAgreement",propTypes:{jobOffer:r.PropTypes.object.isRequired,jobOfferParticipantAgreement:r.PropTypes.object.isRequired,position:r.PropTypes.object.isRequired},getInitialState:function(){return{}},render:function(){var e=this.props,n=e.jobOffer,t=e.position,r=e.jobOfferParticipantAgreement,p=a.findById(r.job_offer.employer_id),d=o.findById(p.staff_id);return u({className:"panel panel-default participant-group-panel"},i({employer:p,staff:d}),u({className:"list-group"},s({jobOffer:n,jobOfferParticipantAgreement:r,position:t})),c({name:""},u({},l(r.created_at).fromNow())))}});e.exports=p},114:function(e,n,t){"use strict";var r=t(23),a=r.createClass({displayName:"ReadOnlyFormGroup",render:function(){var e=this.props.label,n=this.props.value;return r.DOM.div({className:"form-group"},r.DOM.label({className:"control-label col-xs-12 col-sm-4"},e),r.DOM.span({className:"control-label col-xs-12 col-sm-8",style:{textAlign:"left"}},n))}});e.exports=a}});